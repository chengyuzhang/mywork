webpackJsonp([8],{0:function(t,e,a){t.exports=a(21)},21:function(t,e,a){"use strict";function d(t){return t&&t.__esModule?t:{default:t}}function l(t){var e=(0,r.default)(".user-info .user-log"),a=(0,r.default)(".user-info span b"),d=(0,r.default)(".user-info span em"),l=(0,r.default)(".user-info .quit-btn");r.default.ajax({type:"post",url:u.default+"/member/center",data:{memberNo:t},success:function(t){if(t.head.code)return 71982==t.head.code&&((0,c.rmSto)("nickname"),(0,c.rmSto)("timestamp"),(0,c.rmSto)("token"),(0,c.rmSto)("vipNo"),alert("出现错误，请重新登录！"),location.href="personal-orders.html"),void console.log(t.head.message);var t=t.body;(0,r.default)(e).attr("src",t.avatar),(0,r.default)(a).text(t.nickname),(0,r.default)(d).text(t.mobile),(0,r.default)(l).css("display","block")},error:function(t){console.log(t)}})}function s(){var t=(0,r.default)(".edit-img"),e=(0,r.default)(".edit-name"),a=(0,r.default)(".edit-tel"),d=(0,r.default)(".edit-sex");r.default.ajax({type:"get",url:u.default+"/member",data:{memberNo:f},success:function(l){if(l.head.code)return 71982==l.head.code&&((0,c.rmSto)("nickname"),(0,c.rmSto)("timestamp"),(0,c.rmSto)("token"),(0,c.rmSto)("vipNo"),alert("出现错误，请重新登录！"),location.href="personal-orders.html"),void console.log(l.head.message);var l=l.body.user;(0,r.default)(t).attr("src",l.avatar),(0,r.default)(e).text(l.nickname),(0,r.default)(a).text(l.mobile),(0,r.default)(d).text(l.gender)},error:function(t){console.log(t)}})}function n(t,e){var a="";r.default.ajax({type:g,url:p,data:h,success:function(d){function l(t){var e="";switch(t){case 10:e="等待付款";break;case 20:e="正在备货";break;case 21:e="已取消";break;case 30:e="待收货";break;case 31:e="待退款";break;case 40:e="交易成功";break;case 41:e="已退款";break;case 50:e="售后中";break;case 60:e="售后处理中";break;case 61:e="售后不成立";break;case 70:e="售后成功"}return e}function s(t){var e=[];switch(t){case 10:e=["去支付"];break;case 20:e=[];break;case 21:e=["联系客服","再次购买"];break;case 30:e=["查看物流","确认收货"];break;case 31:e=[];break;case 40:e=["再次购买"];break;case 41:e=[];break;case 50:e=["联系客服"];break;case 60:e=["联系客服"];break;case 61:e=[];break;case 70:e=[]}return e}d.head.code&&console.log(d.head.message);var d=d.body;if("order-list"==t&&d.orderList.forEach(function(t,e){if(t.goodsList.length){if(a+='<div class="wrap-list-item">',a+="<h4>"+l(t.statusCode)+"</h4>",t.goodsList.forEach(function(e,d){a+='<dl>\n\t\t\t                      \t<dt><img src="" data-src='+e.picture+' alt=""></dt>\n\t\t\t                      \t<dd class="item-name">\n\t\t\t                          \t<div><h5>'+e.longName+"</h5>",t.comment&&(a+="<em>备注："+e.comment+"</em>"),a+="</div>",e.accessoryName&&(a+="<p>配件："+e.accessoryName+"</p>"),a+="</dd>\n\t\t\t                  \t</dl>"}),a+='<p class="pay-for">\n\t\t                    \t<span>共<i>'+t.number+"</i>件商品</span>",a+=10==t.statusCode?"<span>需付款：<i>¥"+t.orderPrice+"</i></span>":"<span>实付款：<i>¥"+t.orderPrice+"</i></span>",s(t.statusCode).length)for(var d=s(t.statusCode).length-1;d>=0;d--)a+="确认收货"==s(t.statusCode)[d]?'<a href="javascript:;" data-order='+t.orderNo+" data-index="+e+">"+s(t.statusCode)[d]+"</a>":"查看物流"==s(t.statusCode)[d]?'<a href="custom-detail.html?orderNo='+t.orderNo+"&statusCode="+t.statusCode+'" data-order='+t.orderNo+" data-index="+e+">"+s(t.statusCode)[d]+"</a>":'<a href="javascript:;" data-order='+t.orderNo+">"+s(t.statusCode)[d]+"</a>";a+="</p>\n\t        \t\t\t</div>"}}),"custom-list"==t&&(console.log("custom:",d),d.orders.forEach(function(t,e){switch(a+='<div class="wrap-mycustom" style="">\n\t\t                    <div class="custom-list-details">\n\t\t                        <p class="list-date"><em>'+t.createTime+'</em></p>\n\t\t                        <div class="list-table">\n\t\t                            <ul class="clear">\n\t\t                                <li>宝贝</li>\n\t\t                                <li>款式</li>\n\t\t                                <li>材质</li>\n\t\t                                <li>尺寸</li>\n\t\t                                <li>刻字</li>\n\t\t                            </ul>\n\t\t                            <ol class="clear" data-order-num='+t.orderNo+'>\n\t\t                                <li class="goods-list-pic"><img data-src='+t.cover+"></li>\n\t\t                                <li>"+t.style+"</li>\n\t\t                                <li>"+t.material+"</li>\n\t\t                                <li>"+t.size+"</li>\n\t\t                                <li>"+t.lettering+'</li>\n\t\t                            </ol>\n\t\t                            <p class="pay-for">支付金额：<em>¥'+t.price+"</em> <strong data-index="+e+">"+t.statusName+"</strong>",t.status){case 10:a+='<a href="javascript:" data-order='+t.orderNo+'>立即付款</a><a href="jump.html" class="contact">联系客服</a>';break;case 20:a+='<a href="javascript:" data-index='+e+" data-order="+t.orderNo+'>申请退款</a><a href="jump.html" class="contact">联系客服</a>';break;case 40:a+='<a href="jump.html" class="contact">联系客服</a>';break;case 60:a+='<a href="jump.html" class="contact">联系客服</a>';break;case 70:a+='<a href="javascript:" data-index='+e+" data-order="+t.orderNo+'>确认收货</a><a href="jump.html" class="contact">联系客服</a>';break;case 80:a+='<a href="jump.html" class="contact">联系客服</a>';break;case 31:a+='<a href="javascript:" data-index='+e+" data-order="+t.orderNo+'>申请退款</a><a href="jump.html" class="contact">联系客服</a>';break;case 41:a+='<a href="jump.html" class="contact">联系客服</a>';break;default:a+='<a href="jump.html" class="contact">联系客服</a>'}a+="</p></div>\n\t\t                    </div>\n\t\t                </div>"})),(0,r.default)(e).html(a),"order-list"==t)var n=(0,r.default)(".wrap-list-item dt img");if("custom-list"==t)var n=(0,r.default)(".goods-list-pic img");!function(){(0,c.imgLazy)(n)}();var o=Math.ceil(d.page/v);y&&("order-list"==t&&i(o,"order-list",(0,r.default)(".wrap-list-con")),"custom-list"==t&&i(o,"custom-list",(0,r.default)(".mycustom-wrap")),y=!1)},error:function(t){console.log(t)}})}function i(t,e,a){function d(a,s){function o(t){0==t?d("init",t):1==t?d("second",t):2==t?d("third",t):3==t?d("fourth",t):t>3&&t<y-4?d("middle",t):t==y-4?d("last-4",t):t==y-3?d("last-3",t):t==y-2?d("last-2",t):t==y-1&&d("last-1",t)}var c="";if("init"==a){c+='<ul class="page-wrap">';for(var u=0;u<t;u++)c+=u<3?0==u?'<li class="active">'+(u+1)+"</li>":"<li>"+(u+1)+"</li>":u>=3&&u<=t-2?'<li class="dot">...</li>':"<li>"+(u+1)+"</li>";c+='</ul><span class="to-next"></span>',l.html(c)}else if("second"==a){c+='<span class="to-prev"></span><ul class="page-wrap">';for(var u=0;u<t;u++)c+=u<3?"<li>"+(u+1)+"</li>":u>=3&&u<=t-2?'<li class="dot">...</li>':"<li>"+(u+1)+"</li>";c+='</ul><span class="to-next"></span>',l.html(c)}else if("third"==a){c+='<span class="to-prev"></span><ul class="page-wrap">';for(var u=0;u<t;u++)c+=u<4?"<li>"+(u+1)+"</li>":u>=4&&u<=t-2?'<li class="dot">...</li>':"<li>"+(u+1)+"</li>";c+='</ul><span class="to-next"></span>',l.html(c)}else if("fourth"==a){c+='<span class="to-prev"></span><ul class="page-wrap">';for(var u=0;u<t;u++)c+=u<5?"<li>"+(u+1)+"</li>":u>=5&&u<=t-2?'<li class="dot">...</li>':"<li>"+(u+1)+"</li>";c+='</ul><span class="to-next"></span>',l.html(c)}else if("middle"==a){var f=Math.ceil(t/2),p=s-f;p++,c+='<span class="to-prev"></span><ul class="page-wrap">';for(var u=0;u<t;u++)c+=u<1?"<li>"+(u+1)+"</li>":u>=1&&u<f-2+p?'<li class="dot">...</li>':u>=f-2+p&&u<f+1+p?"<li>"+(u+1)+"</li>":u>=f+1+p&&u<t-1?'<li class="dot2">...</li>':"<li>"+(u+1)+"</li>";c+='</ul><span class="to-next"></span>',l.html(c)}else if("last-4"==a){var f=Math.ceil(t/2);c+='<span class="to-prev"></span><ul class="page-wrap">';for(var u=0;u<t;u++)c+=u>=1&&u<t-5?'<li class="dot">...</li>':"<li>"+(u+1)+"</li>";c+='</ul><span class="to-next"></span>',l.html(c)}else if("last-3"==a){var f=Math.ceil(t/2);c+='<span class="to-prev"></span><ul class="page-wrap">';for(var u=0;u<t;u++)c+=u>=1&&u<t-4?'<li class="dot">...</li>':"<li>"+(u+1)+"</li>";c+='</ul><span class="to-next"></span>',l.html(c)}else if("last-2"==a){var f=Math.ceil(t/2);c+='<span class="to-prev"></span><ul class="page-wrap">';for(var u=0;u<t;u++)c+=u>=1&&u<t-3?'<li class="dot">...</li>':"<li>"+(u+1)+"</li>";c+='</ul><span class="to-next"></span>',l.html(c)}else if("last-1"==a){var f=Math.ceil(t/2);c+='<span class="to-prev"></span><ul class="page-wrap">';for(var u=0;u<t;u++)c+=u>=1&&u<t-3?'<li class="dot">...</li>':"<li>"+(u+1)+"</li>";c+="</ul>",l.html(c)}var m=(0,r.default)(".to-prev"),v=(0,r.default)(".to-next"),g=(0,r.default)(".page-wrap li"),y=g.length;(0,r.default)(".dot").each(function(t,e){t>0&&(0,r.default)(e).css("display","none")}),(0,r.default)(".dot2").each(function(t,e){t>0&&(0,r.default)(e).css("display","none")}),"init"!=a&&(0,r.default)(g[i]).removeClass("active"),(0,r.default)(g[s]).addClass("active"),i=s,(0,r.default)(g).each(function(t,a){(0,r.default)(a).on("click",function(){o(t),h.pageNum=t+1,"order-list"==e&&n("order-list",(0,r.default)(".wrap-list-con")),"custom-list"==e&&n("custom-list",(0,r.default)(".mycustom-wrap"))})}),m.on("click",function(){i--,o(i),h.pageNum=i+1,n()}),v.on("click",function(){i++,o(i),h.pageNum=i+1,"order-list"==e&&n(i+1,"order-list",(0,r.default)(".wrap-list-con")),"custom-list"==e&&n(i+1,"custom-list",(0,r.default)(".mycustom-wrap"))})}var l=(0,r.default)(".paging"),s="",i=0;if(1==t||0==t?(0,r.default)(".paging").css("display","none"):(0,r.default)(".paging").css("display","block"),t<9){s+='<span class="to-prev"></span><ul class="page-wrap">';for(var o=0;o<t;o++)s+=o==i?'<li class="active">'+(o+1)+"</li>":"<li>"+(o+1)+"</li>";s+='</ul><span class="to-next"></span>',l.html(s);for(var c=(0,r.default)(".to-prev"),u=(0,r.default)(".to-next"),f=(0,r.default)(".page-wrap li"),o=0;o<f.length;o++)!function(t){(0,r.default)(f[t]).on("click",function(){f[i].className="",i=t,h.pageNum=t+1,"order-list"==e&&n("order-list",(0,r.default)(".wrap-list-con")),"custom-list"==e&&n("custom-list",(0,r.default)(".mycustom-wrap")),(0,r.default)(this).get(0).className="active"})}(o);c.on("click",function(){0!=i&&(f[i].className="",i--,h.pageNum=i+1,"order-list"==e&&n("order-list",(0,r.default)(".wrap-list-con")),"custom-list"==e&&n("custom-list",(0,r.default)(".mycustom-wrap")),f[i].className="active")}),u.on("click",function(){i!=t-1&&(f[i].className="",i++,h.pageNum=i+1,"order-list"==e&&n("order-list",(0,r.default)(".wrap-list-con")),"custom-list"==e&&n("custom-list",(0,r.default)(".mycustom-wrap")),f[i].className="active")})}else d("init",0)}a(2),a(43);var o=a(3),r=d(o),c=a(1),u=d(c),f=(0,c.getSto)("vipNo");(0,c.cartCount)((0,r.default)(".func-public em"));var p=u.default+"/shoporders",m=1,v=5,g="post",h={memberNo:f,type:0,pageNum:m,pageSize:v},y=!0;if(f)l(f),n("order-list",(0,r.default)(".wrap-list-con"));else{var w=(0,r.default)(".login>li>img"),b=(0,c.getSto)("deciveID"),k=(0,r.default)(".opacity");(0,r.default)(k).css("display","block"),setTimeout(function(){(0,r.default)(w).get(0).src=u.default+"/pic?t="+Date.now()+"&random="+b,(0,r.default)(k).css("opacity",1)},50),(0,r.default)(w).on("click",function(){(0,r.default)(this).get(0).src=u.default+"/pic?t="+Date.now()+"&random="+b});var x=/^((1[0-9]{1})+\d{9})$/;!function(){var t=(0,r.default)(".login>li>button"),e=60,a=null,d=!0;t.on("click",function(){if(d){var l=(0,r.default)(".login>li>input.tel").val();if(!x.test(l))return void alert("请输入有效的手机号码");d=!1,a=setInterval(function(){e--,t.html(e+"s"),t.css({color:"#999",border:"1px solid #999"}),e<0&&(clearInterval(a),t.html("重新获取"),d=!0,e=60,t.css({color:"#666",border:"1px solid #666"}))},1e3),r.default.ajax({type:"post",url:u.default+"/user/captcha",data:{mobile:l},success:function(t){t.head.code&&alert(t.head.message)},error:function(t){console.log(t)}})}})}(),function(){var t=(0,r.default)(".login-btn"),e=(0,r.default)(".login>li>img");(0,r.default)(".logout"),t.on("click",function(){var t=(0,r.default)(".sign").val(),a=(0,r.default)(".tel").val(),d=(0,r.default)(".code").val();(0,r.default)(".opacity"),""==a||""==d?alert("手机号或验证码不能为空！"):r.default.ajax({type:"post",url:u.default+"/login",data:{mobile:a,captcha:d,captchaNo:t,random:b},success:function(t){if(t.head.code)return alert(t.head.message),void((0,r.default)(e).get(0).src=u.default+"/pic?t="+Date.now()+"&random="+b);var a=t.body.memberNo;sessionStorage.setItem("token",t.body.token),sessionStorage.setItem("vipNo",a),sessionStorage.setItem("nickname",t.body.nickName),y=!0,l(a),h.memberNo=a,n("order-list",(0,r.default)(".wrap-list-con")),(0,c.cartCount)((0,r.default)(".func-public em")),(0,r.default)(".user-info .quit-btn").css("display","block"),(0,r.default)(k).css("opacity",0),setTimeout(function(){(0,r.default)(k).css("display","none")},510)},error:function(t){console.log(t)}})})}()}(0,r.default)(".quit-btn").on("click",function(){sessionStorage.clear(),location.href="index.html"});var N=(0,r.default)(".nav-tab"),A=(0,r.default)(".nav-con"),j=0,z=((0,r.default)(".mycustom-wrap"),(0,r.default)(".table-address"));N.each(function(t,e){(0,r.default)(e).on("click",function(){switch((0,r.default)(N[j]).removeClass("active"),(0,r.default)(A[j]).css("display","none"),(0,r.default)(e).addClass("active"),(0,r.default)(A[t]).css("display","block"),j=t,f=(0,c.getSto)("vipNo"),t){case 0:p=u.default+"/shoporders",y=!0,g="post",(0,r.default)(".paging").css("display","block"),n("order-list",(0,r.default)(".wrap-list-con"));break;case 1:p=u.default+"/customization/orders",h.pageNum=1,g="get",y=!0,(0,r.default)(".paging").css("display","block"),n("custom-list",(0,r.default)(".mycustom-wrap"));break;case 2:(0,r.default)(".paging").css("display","none"),s();break;case 3:(0,r.default)(".paging").css("display","none");var a="";r.default.ajax({type:"get",url:u.default+"/address",data:{memberNo:f},success:function(t){function e(t,e){o.attr("data-index",t),i.css("display","block"),setTimeout(function(){i.css("opacity",1)},50)}function d(){i.css("opacity",0),setTimeout(function(){i.css("display","none")},500)}a+='<tr style="height:35px;line-height:35px;">\n\t\t\t\t                        <th>收件人</th>\n\t\t\t\t                        <th>详细地址</th>\n\t\t\t\t                        <th>电话</th>\n\t\t\t\t                        <th>操作</th>\n\t\t\t\t                        <th></th>\n\t\t\t\t                    </tr>',t.forEach(function(t,e){a+='<tr class="table-list" data-id='+t.id+'>\n\t\t                        <td class="add-name">'+t.consignee+'</td>\n\t\t                        <td class="add-address" data-zone='+t.zone+" data-detail="+t.detail+">详细地址："+t.zone+t.detail+'</td>\n\t\t                        <td class="add-tel">'+t.mobile+'</td>\n\t\t                        <td class="add-operate"><a href="javascript:" class="edit-address">编辑</a> <i></i> <a href="javascript:" class="delete-address">删除</a></td>',a+=t.defaultAddr?'<td class="add-default"><span class="checkbox active"></span><em>默认地址</em></td>':'<td class="add-default"><span class="checkbox"></span><em>默认地址</em></td>',a+="</tr>"}),(0,r.default)(z).html(a);var l=(0,r.default)(".table-list"),s=(0,r.default)(".table-list .add-default"),n=(0,r.default)(".add-operate .edit-address"),i=(0,r.default)(".opacity1"),o=(0,r.default)(".opacity1 .con li:last-of-type"),c=(0,r.default)(".opacity1 .con li:first-of-type"),p=null;n.each(function(t,e){(0,r.default)(e).on("click",function(){var e=(0,r.default)(l).get(t);e&&((0,r.default)(".add-new-address.edit1 li input.geter").val((0,r.default)(l[t]).find(".add-name").text()),(0,r.default)(".add-new-address.edit1 li input.geter-tel").val((0,r.default)(l[t]).find(".add-tel").text()),(0,r.default)(".add-new-address.edit1 li .geter-zone i").text((0,r.default)(l[t]).find(".add-address").get(0).dataset.zone),(0,r.default)(".add-new-address.edit1 li .geter-zone-local").val((0,r.default)(l[t]).find(".add-address").get(0).dataset.detail),(0,r.default)(".add-new-address.edit1 .keep").get(0).dataset.id=(0,r.default)(l).get(t).dataset.id,(0,r.default)(".add-new-address.add").css("display","none"),(0,r.default)(".add-new-address.edit1").css("display","block"))})}),s.each(function(t,e){(0,r.default)(e).on("click",function(){var a=(0,r.default)(l).get(t);if(a){var d=(0,r.default)(l).get(t).dataset.id;r.default.ajax({type:"post",url:u.default+"/address/default",data:{memberNo:f,id:d},success:function(t){t&&(s.each(function(t,e){(0,r.default)(e).find("span").removeClass("active")}),(0,r.default)(e).find("span").addClass("active"))},error:function(t){console.log(t),alert("设置默认地址失败！")}})}})});var m=(0,r.default)(".delete-address");m.each(function(t,a){(0,r.default)(a).on("click",function(){p=(0,r.default)(a),e(t)})}),o.on("click",function(){var t=(0,r.default)(p).parent().parent().get(0);t&&r.default.ajax({type:"post",url:u.default+"/address/"+(0,r.default)(p).parent().parent().get(0).dataset.id+"/delete",success:function(t){t&&(d(),(0,r.default)(p).parent().parent().remove())},error:function(t){console.log(t)}})}),c.on("click",function(){d()})},error:function(t){console.log(t)}})}})});var S=0,C=(0,r.default)(".wrap-list-nav ul li");C.each(function(t,e){(0,r.default)(e).on("click",function(){switch((0,r.default)(C[S]).removeClass("active"),(0,r.default)(e).addClass("active"),S=t,h.pageNum=1,t){case 0:h.type=0,n("order-list",(0,r.default)(".wrap-list-con")),y=!0;break;case 1:h.type=1,n("order-list",(0,r.default)(".wrap-list-con")),y=!0;break;case 2:h.type=2,n("order-list",(0,r.default)(".wrap-list-con")),y=!0;break;case 3:h.type=3,n("order-list",(0,r.default)(".wrap-list-con")),y=!0;break;case 4:h.type=4,n("order-list",(0,r.default)(".wrap-list-con")),y=!0}})}),(0,r.default)(".add-new-address ul li p"),(0,r.default)(".add-new-address ul li p i"),!function(){function t(){var t=(0,r.default)(".city li");t.each(function(e,a){(0,r.default)(a).on("click",function(){t.each(function(t,e){(0,r.default)(e).removeClass("active")}),(0,r.default)(this).addClass("active"),(0,r.default)(c).text(o+"/"+(0,r.default)(this).text()),p.css("opacity",0),m=setTimeout(function(){p.css("display","none")},500)})})}var e=new Array("北京市","上海市","天津市","重庆市","河北省","山西省","内蒙古自治区","辽宁省","吉林省","黑龙江省","江苏省","浙江省","安徽省","福建省","江西省","山东省","河南省","湖北省","湖南省","广东省","广西壮族自治区","海南省","四川省","贵州省","云南省","西藏自治区","陕西省","甘肃省","宁夏回族自治区","青海省","新疆维吾尔族自治区","香港特别行政区","澳门特别行政区","台湾省"),a=new Array;a[0]=new Array("北京市","东城区|西城区|崇文区|宣武区|朝阳区|丰台区|石景山区|海淀区|门头沟区|房山区|通州区|顺义区|昌平区|大兴区|平谷区|怀柔区|密云区|延庆区"),a[1]=new Array("上海市","黄浦区|卢湾区|徐汇区|长宁区|静安区|普陀区|闸北区|虹口区|杨浦区|闵行区|宝山区|嘉定区|浦东区|金山区|松江区|青浦区|南汇区|奉贤区|崇明区"),a[2]=new Array("天津市","和平区|东丽区|河东区|西青区|河西区|津南区|南开区|北辰区|河北区|武清区|红挢区|塘沽区|汉沽区|大港区|宁河区|静海区|宝坻区|蓟县"),a[3]=new Array("重庆市","万州区|涪陵区|渝中区|大渡口区|江北区|沙坪坝区|九龙坡区|南岸区|北碚区|万盛区|双挢区|渝北区|巴南区|黔江区|长寿区|綦江区|潼南区|铜梁 区|大足区|荣昌区|壁山区|梁平区|城口区|丰都区|垫江区|武隆区|忠县区|开县区|云阳区|奉节区|巫山区|巫溪区|石柱区|秀山区|酉阳区|彭水区|江津区|合川区|永川区|南川区"),a[4]=new Array("河北省","石家庄市|邯郸市|邢台市|保定市|张家口市|承德市|廊坊市|唐山市|秦皇岛市|沧州市|衡水市"),a[5]=new Array("山西省","太原市|大同市|阳泉市|长治市|晋城市|朔州市|吕梁市|忻州市|晋中市|临汾市|运城市"),a[6]=new Array("内蒙古自治区","呼和浩特市|包头市|乌海市|赤峰市|呼伦贝尔盟市|阿拉善盟市|哲里木盟市|兴安盟市|乌兰察布盟市|锡林郭勒盟市|巴彦淖尔盟市|伊克昭盟市"),a[7]=new Array("辽宁省","沈阳市|大连市|鞍山市|抚顺市|本溪市|丹东市|锦州市|营口市|阜新市|辽阳市|盘锦市|铁岭市|朝阳市|葫芦岛市"),a[8]=new Array("吉林省","长春市|吉林市|四平市|辽源市|通化市|白山市|松原市|白城市|延边市"),a[9]=new Array("黑龙江省","哈尔滨市|齐齐哈尔市|牡丹江市|佳木斯市|大庆市|绥化市|鹤岗市|鸡西市|黑河市|双鸭山市|伊春市|七台河市|大兴安岭市"),a[10]=new Array("江苏省","南京市|镇江市|苏州市|南通市|扬州市|盐城市|徐州市|连云港市|常州市|无锡市|宿迁市|泰州市|淮安市"),a[11]=new Array("浙江省","杭州市|宁波市|温州市|嘉兴市|湖州市|绍兴市|金华市|衢州市|舟山市|台州市|丽水市"),a[12]=new Array("安徽省","合肥市|芜湖市|蚌埠市|马鞍山市|淮北市|铜陵市|安庆市|黄山市|滁州市|宿州市|池州市|淮南市|巢湖市|阜阳市|六安市|宣城市|亳州市"),a[13]=new Array("福建省","福州市|厦门市|莆田市|三明市|泉州市|漳州市|南平市|龙岩市|宁德市"),a[14]=new Array("江西省","南昌市|景德镇市|九江市|鹰潭市|萍乡市|新馀市|赣州市|吉安市|宜春市|抚州市|上饶市"),a[15]=new Array("山东省","济南市|青岛市|淄博市|枣庄市|东营市|烟台市|潍坊市|济宁市|泰安市|威海市|日照市|莱芜市|临沂市|德州市|聊城市|滨州市|菏泽市"),a[16]=new Array("河南省","郑州市|开封市|洛阳市|平顶山市|安阳市|鹤壁市|新乡市|焦作市|濮阳市|许昌市|漯河市|三门峡市|南阳市|商丘市|信阳市|周口市|驻马店市|济源市"),a[17]=new Array("湖北省","武汉市|宜昌市|荆州市|襄樊市|黄石市|荆门市|黄冈市|十堰市|恩施市|潜江市|天门市|仙桃市|随州市|咸宁市|孝感市|鄂州市"),a[18]=new Array("湖南省","长沙市|常德市|株洲市|湘潭市|衡阳市|岳阳市|邵阳市|益阳市|娄底市|怀化市|郴州市|永州市|湘西市|张家界市"),a[19]=new Array("广东省","广州市|深圳市|珠海市|汕头市|东莞市|中山市|佛山市|韶关市|江门市|湛江市|茂名市|肇庆市|惠州市|梅州市|汕尾市|河源市|阳江市|清远市|潮州市|揭阳市|云浮市"),a[20]=new Array("广西壮族自治区","南宁市|柳州市|桂林市|梧州市|北海市|防城港市|钦州市|贵港市|玉林市|南宁地区市|柳州地区市|贺州市|百色市|河池市"),a[21]=new Array("海南省","海口市|三亚市|三沙市|儋州市|五指山市|文昌市|琼海市|万宁市|东方市"),a[22]=new Array("四川省","成都市|绵阳市|德阳市|自贡市|攀枝花市|广元市|内江市|乐山市|南充市|宜宾市|广安市|达川市|雅安市|眉山市|甘孜市|凉山市|泸州市"),a[23]=new Array("贵州省","贵阳市|六盘水市|遵义市|安顺市|铜仁市|黔西南市|毕节市|黔东南市|黔南市"),a[24]=new Array("云南省","昆明市|大理市|曲靖市|玉溪市|昭通市|楚雄市|红河市|文山市|思茅市|西双版纳市|保山市|德宏市|丽江市|怒江市|迪庆市|临沧市"),a[25]=new Array("西藏自治区","拉萨市|日喀则市|山南市|林芝市|昌都市|阿里市|那曲市"),a[26]=new Array("陕西省","西安市|宝鸡市|咸阳市|铜川市|渭南市|延安市|榆林市|汉中市|安康市|商洛市"),a[27]=new Array("甘肃省","兰州市|嘉峪关市|金昌市|白银市|天水市|酒泉市|张掖市|武威市|定西市|陇南市|平凉市|庆阳市|临夏市|甘南市"),a[28]=new Array("宁夏回族自治区","银川市|石嘴山市|吴忠市|固原市"),a[29]=new Array("青海省","西宁市|海东市|海南市|海北市|黄南市|玉树市|果洛市|海西市"),a[30]=new Array("新疆维吾尔族自治区","乌鲁木齐市|石河子市|克拉玛依市|伊犁市|巴音郭勒市|昌吉市|克孜勒苏柯尔克孜市|博尔塔拉市|吐鲁番市|哈密市|喀什市|和田市|阿克苏市"),a[31]=new Array("香港特别行政区","香港特别行政区"),a[32]=new Array("澳门特别行政区","澳门特别行政区"),a[33]=new Array("台湾省","台北市|高雄市|台中市|台南市|屏东市|南投市|云林市|新竹市|彰化市|苗栗市|嘉义市|花莲市|桃园市|宜兰市|基隆市|台东市|金门市|马祖市|澎湖市");var d=(0,r.default)(".province ul"),l=(0,r.default)(".city ul"),s="",n="";e.forEach(function(t,e){s+="<li>"+t+"</li>"}),d.html(s);var i=(0,r.default)(".province ul li"),o="北京市",c=(0,r.default)(".add-new-address ul li p i");a[0][1].split("|").forEach(function(t,e){n+="<li>"+t+"</li>"}),l.html(n),t(),i.each(function(e,d){(0,r.default)(d).on("click",function(){var e=(0,r.default)(this).text();n="",a.forEach(function(t,a){if(e==t[0]){o=t[0];var d=t[1].split("|");d.forEach(function(t,e){n+="<li>"+t+"</li>"}),l.html(n)}}),t()})});var u=(0,r.default)(".select-top>span.close"),f=(0,r.default)(".add-new-address ul li p"),p=(0,r.default)(".select"),m=null;f.on("click",function(){p.css("display","block"),m=setTimeout(function(){p.css("opacity",1)},50)}),u.on("click",function(){p.css("opacity",0),m=setTimeout(function(){p.css("display","none")},500)})}();var x=/^((1[0-9]{1})+\d{9})$/,T=(0,r.default)(".add-new-address.add .keep"),E=(0,r.default)(".add-new-address.edit1 .keep");(0,c.getSto)("token"),T.on("click",function(){var t=(0,r.default)(".add-new-address.add li input.geter").val(),e=(0,r.default)(".add-new-address.add li input.geter-tel").val(),a=(0,r.default)(".add-new-address.add li .geter-zone i").text(),d=(0,r.default)(".add-new-address.add li .geter-zone-local").val(),l=(0,c.getSto)("vipNo");if(""!=(t&&e&&a&&d)){if(!x.test(e))return alert("请输入有效的手机号码"),!1;r.default.ajax({type:"post",url:u.default+"/address/save",data:{consignee:t,mobile:e,zone:a.replace(/\//,""),detail:d,memberNo:l},success:function(t){(0,r.default)(".add-new-address.add li input.geter").val(""),(0,r.default)(".add-new-address.add li input.geter-tel").val(""),(0,r.default)(".add-new-address.add li .geter-zone i").text("请选择省市"),(0,r.default)(".add-new-address.add li .geter-zone-local").val(""),(0,r.default)(".keep").get(0).dataset.id="";var e="";r.default.ajax({type:"get",url:u.default+"/address",data:{memberNo:l},success:function(t){function a(t,e){c.attr("data-index",t),o.css("display","block"),setTimeout(function(){o.css("opacity",1)},50)}function d(){o.css("opacity",0),setTimeout(function(){o.css("display","none")},500)}e+='<tr style="height:35px;line-height:35px;">\n\t\t\t\t                        <th>收件人</th>\n\t\t\t\t                        <th>详细地址</th>\n\t\t\t\t                        <th>电话</th>\n\t\t\t\t                        <th>操作</th>\n\t\t\t\t                        <th></th>\n\t\t\t\t                    </tr>',t.forEach(function(t,a){e+='<tr class="table-list" data-id='+t.id+'>\n\t\t                        <td class="add-name">'+t.consignee+'</td>\n\t\t                        <td class="add-address" data-zone='+t.zone+" data-detail="+t.detail+">详细地址："+t.zone+t.detail+'</td>\n\t\t                        <td class="add-tel">'+t.mobile+'</td>\n\t\t                        <td class="add-operate"><a href="javascript:" class="edit-address">编辑</a> <i></i> <a href="javascript:" class="delete-address">删除</a></td>',e+=t.defaultAddr?'<td class="add-default"><span class="checkbox active"></span><em>默认地址</em></td>':'<td class="add-default"><span class="checkbox"></span><em>默认地址</em></td>',e+="</tr>"}),(0,r.default)(z).html(e);var s=(0,r.default)(".table-list"),n=(0,r.default)(".table-list .add-default"),i=(0,r.default)(".add-operate .edit-address"),o=(0,r.default)(".opacity1"),c=(0,r.default)(".opacity1 .con li:last-of-type"),f=(0,r.default)(".opacity1 .con li:first-of-type"),p=null;i.each(function(t,e){(0,r.default)(e).on("click",function(){var e=(0,r.default)(s).get(t);e&&((0,r.default)(".add-new-address.edit1 li input.geter").val((0,r.default)(s[t]).find(".add-name").text()),(0,r.default)(".add-new-address.edit1 li input.geter-tel").val((0,r.default)(s[t]).find(".add-tel").text()),(0,r.default)(".add-new-address.edit1 li .geter-zone i").text((0,r.default)(s[t]).find(".add-address").get(0).dataset.zone),(0,r.default)(".add-new-address.edit1 li .geter-zone-local").val((0,r.default)(s[t]).find(".add-address").get(0).dataset.detail),(0,r.default)(".add-new-address.edit1 .keep").get(0).dataset.id=(0,r.default)(s).get(t).dataset.id,(0,r.default)(".add-new-address.add").css("display","none"),(0,r.default)(".add-new-address.edit1").css("display","block"))})}),n.each(function(t,e){(0,r.default)(e).on("click",function(){var a=(0,r.default)(s).get(t);if(a){var d=(0,r.default)(s).get(t).dataset.id;r.default.ajax({type:"post",url:u.default+"/address/default",data:{memberNo:l,id:d},success:function(t){t&&(n.each(function(t,e){(0,r.default)(e).find("span").removeClass("active")}),(0,r.default)(e).find("span").addClass("active"))},error:function(t){console.log(t),alert("设置默认地址失败！")}})}})});var m=(0,r.default)(".delete-address");m.each(function(t,e){(0,r.default)(e).on("click",function(){p=(0,r.default)(e),a(t)})}),c.on("click",function(){var t=(0,r.default)(p).parent().parent().get(0);t&&r.default.ajax({type:"post",url:u.default+"/address/"+(0,r.default)(p).parent().parent().get(0).dataset.id+"/delete",success:function(t){t&&(d(),(0,r.default)(p).parent().parent().remove())},error:function(t){console.log(t)}})}),f.on("click",function(){d()})},error:function(t){console.log(t)}})},error:function(t){alert("添加失败！"),console.log(t)}})}else alert("不能有留空项~")}),E.on("click",function(){var t=(0,r.default)(".add-new-address.edit1 li input.geter").val(),e=(0,r.default)(".add-new-address.edit1 li input.geter-tel").val(),a=(0,r.default)(".add-new-address.edit1 li .geter-zone i").text(),d=(0,r.default)(".add-new-address.edit1 li .geter-zone-local").val(),l=(0,c.getSto)("vipNo");if(""!=(t&&e&&a&&d)){if(!x.test(e))return alert("请输入有效的手机号码"),!1;r.default.ajax({type:"post",url:u.default+"/address/edit",data:{consignee:t,mobile:e,zone:a.replace(/\//,""),detail:d,defaultAddr:!1,memberNo:l,id:(0,r.default)(E).get(0).dataset.id},success:function(t){(0,r.default)(".add-new-address.edit1 li input.geter").val(""),(0,r.default)(".add-new-address.edit1 li input.geter-tel").val(""),(0,r.default)(".add-new-address.edit1 li .geter-zone i").text("请选择省市"),(0,r.default)(".add-new-address.edit1 li .geter-zone-local").val(""),(0,r.default)(".keep").get(0).dataset.id="";var e="";r.default.ajax({type:"get",url:u.default+"/address",data:{memberNo:l},success:function(t){function a(t,e){c.attr("data-index",t),o.css("display","block"),setTimeout(function(){o.css("opacity",1)},50)}function d(){o.css("opacity",0),setTimeout(function(){o.css("display","none")},500)}e+='<tr style="height:35px;line-height:35px;">\n\t\t\t\t                        <th>收件人</th>\n\t\t\t\t                        <th>详细地址</th>\n\t\t\t\t                        <th>电话</th>\n\t\t\t\t                        <th>操作</th>\n\t\t\t\t                        <th></th>\n\t\t\t\t                    </tr>',t.forEach(function(t,a){e+='<tr class="table-list" data-id='+t.id+'>\n\t\t                        <td class="add-name">'+t.consignee+'</td>\n\t\t                        <td class="add-address" data-zone='+t.zone+" data-detail="+t.detail+">详细地址："+t.zone+t.detail+'</td>\n\t\t                        <td class="add-tel">'+t.mobile+'</td>\n\t\t                        <td class="add-operate"><a href="javascript:" class="edit-address">编辑</a> <i></i> <a href="javascript:" class="delete-address">删除</a></td>',e+=t.defaultAddr?'<td class="add-default"><span class="checkbox active"></span><em>默认地址</em></td>':'<td class="add-default"><span class="checkbox"></span><em>默认地址</em></td>',e+="</tr>"}),(0,r.default)(z).html(e),(0,r.default)(".add-new-address.edit1").css("display","none"),(0,r.default)(".add-new-address.add").css("display","block");var s=(0,r.default)(".table-list"),n=(0,r.default)(".table-list .add-default"),i=(0,r.default)(".add-operate .edit-address"),o=(0,r.default)(".opacity1"),c=(0,r.default)(".opacity1 .con li:last-of-type"),f=(0,r.default)(".opacity1 .con li:first-of-type"),p=null;i.each(function(t,e){(0,r.default)(e).on("click",function(){var e=(0,r.default)(s).get(t);e&&((0,r.default)(".add-new-address.edit1 li input.geter").val((0,r.default)(s[t]).find(".add-name").text()),(0,r.default)(".add-new-address.edit1 li input.geter-tel").val((0,r.default)(s[t]).find(".add-tel").text()),(0,r.default)(".add-new-address.edit1 li .geter-zone i").text((0,r.default)(s[t]).find(".add-address").get(0).dataset.zone),(0,r.default)(".add-new-address.edit1 li .geter-zone-local").val((0,r.default)(s[t]).find(".add-address").get(0).dataset.detail),(0,r.default)(".add-new-address.edit1 .keep").get(0).dataset.id=(0,r.default)(s).get(t).dataset.id,(0,r.default)(".add-new-address.add").css("display","none"),(0,r.default)(".add-new-address.edit1").css("display","block"))})}),n.each(function(t,e){(0,r.default)(e).on("click",function(){var a=(0,r.default)(s).get(t);if(a){var d=(0,r.default)(s).get(t).dataset.id;r.default.ajax({type:"post",url:u.default+"/address/default",data:{memberNo:l,id:d},success:function(t){t&&(n.each(function(t,e){(0,r.default)(e).find("span").removeClass("active")}),(0,r.default)(e).find("span").addClass("active"))},error:function(t){console.log(t),alert("设置默认地址失败！")}})}})});var m=(0,r.default)(".delete-address");m.each(function(t,e){(0,r.default)(e).on("click",function(){p=(0,r.default)(e),a(t)})}),c.on("click",function(){var t=(0,r.default)(p).parent().parent().get(0);t&&r.default.ajax({type:"post",url:u.default+"/address/"+(0,r.default)(p).parent().parent().get(0).dataset.id+"/delete",success:function(t){t&&(d(),(0,r.default)(p).parent().parent().remove())},error:function(t){console.log(t)}})}),f.on("click",function(){d()})},error:function(t){console.log(t)}})},error:function(t){alert("添加失败！"),console.log(t)}})}else alert("不能有留空项~")}),function(){var t=(0,r.default)(".opacity2"),e=(0,r.default)(".edit-btn");e.on("click",function(){t.css("display","block"),setTimeout(function(){t.css("opacity",1)},50);var e=(0,r.default)(".edit-img1"),a=(0,r.default)(".edit-name1"),d=(0,r.default)(".edit-tel1"),l=(0,r.default)(".sex-item1 b");r.default.ajax({type:"get",url:u.default+"/member",data:{memberNo:f},success:function(t){if(t.head.code)return 71982==t.head.code&&((0,c.rmSto)("nickname"),(0,c.rmSto)("timestamp"),(0,c.rmSto)("token"),(0,c.rmSto)("vipNo"),alert("出现错误，请重新登录！"),location.href="personal-orders.html"),void console.log(t.head.message);var t=t.body.user;(0,r.default)(e).attr("src",t.avatar),(0,r.default)(a).val(t.nickname),(0,r.default)(d).val(t.mobile),(0,r.default)(l).text(t.gender)},error:function(t){console.log(t)}})})}(),function(){var t=(0,r.default)(".sex-item1>i"),e=(0,r.default)(".sex-item1>i>b"),a=(0,r.default)(".sex>li"),d=(0,r.default)(".sex");t.on("click",function(){d.css("display","block"),setTimeout(function(){d.css("opacity",1)},50)}),a.on("click",function(){e.text((0,r.default)(this).text()),d.css("opacity",0),setTimeout(function(){d.css("display","none")},500)})}(),function(){var t=(0,r.default)(".upload"),e=(sessionStorage.getItem("vipNo"),sessionStorage.getItem("token"),(0,r.default)(".circle"));t.on("change",function(){var t=this.files[0],a=new FileReader;if("undefined"==typeof t)return void(t="null");
var d=new FormData;d.append("test",t),(0,r.default)(e).css("display","block"),setTimeout(function(){(0,r.default)(e).css("opacity",1)},50),a.onload=function(t){(0,r.default)(".nav-con2>ul>li>em>img").attr("src",t.target.result),r.default.ajax({type:"post",url:u.default+"/pic/upload",data:d,processData:!1,contentType:!1,success:function(t){console.log(t),t.head.code&&(71982==t.head.code&&((0,c.rmSto)("nickname"),(0,c.rmSto)("timestamp"),(0,c.rmSto)("token"),(0,c.rmSto)("vipNo"),alert("出现错误，请重新登录！")),alert(t.head.message)),t.head.code||(window.oAvatar=t.body.avatar,(0,r.default)(e).find("p").text("图片上传成功"),setTimeout(function(){console.log(111),(0,r.default)(e).css("opacity",0)},500),setTimeout(function(){(0,r.default)(e).css("display","none")},1e3))},error:function(t){console.log(t)}})},a.readAsDataURL(t)})}(),function(){var t=document.querySelector(".save"),e=(0,r.default)(".circle"),a=(0,r.default)(".opacity2");sessionStorage.getItem("token"),t.addEventListener("click",function(){var t=(0,r.default)(".edit-name1").val(),d=((0,r.default)(".edit-tel").val(),(0,r.default)(".sex-item1>i>b").text()),n=sessionStorage.getItem("vipNo");console.log("NAME:",t),(0,r.default)(e).css("display","block"),setTimeout(function(){(0,r.default)(e).css("opacity",1)},50),r.default.ajax({type:"post",url:u.default+"/member/edit",data:{nickname:t,gender:d,memberNo:n,avatar:window.oAvatar},success:function(t){t&&((0,r.default)(e).find("p").text("保存成功"),setTimeout(function(){(0,r.default)(e).css("opacity",0)},500),setTimeout(function(){(0,r.default)(e).css("display","none")},1e3),(0,r.default)(a).css("display","none"),setTimeout(function(){(0,r.default)(a).css("opacity",0)},500),l(n),s())},error:function(t){console.log(t)}})},!1)}()},43:2});