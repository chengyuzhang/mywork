webpackJsonp([6],{0:function(e,t,a){e.exports=a(23)},23:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=(0,i.default)(".gallery-top .swiper-wrapper"),a="",l=(0,i.default)(".gallery-thumbs .swiper-wrapper"),s="",h=(0,i.default)(".right-words .words-title h2"),b=(0,i.default)(".words-title ul"),y="",v=(0,i.default)(".goods-kind"),k="",S=(0,i.default)(".accessorys"),w="",C=(0,i.default)(".sale-price"),I=(0,i.default)(".sign-price"),N=(0,i.default)(".img-detail"),x="";i.default.ajax({type:"get",url:d.default+"/goods/detail/queryGoodsById",data:{goodsId:e},success:function(e){if(e.head.code)return void console.log(e.head.message);var e=e.body.goods;console.log(e),e.topPictures.forEach(function(e,t){a+='<div class="swiper-slide"><img src='+e+"></div>",s+='<div class="swiper-slide"><img src='+e+"></div>"}),(0,i.default)(t).html(a),(0,i.default)(l).html(s);var P=new Swiper(".gallery-top",{nextButton:".swiper-button-next",prevButton:".swiper-button-prev",spaceBetween:10}),O=new Swiper(".gallery-thumbs",{spaceBetween:10,centeredSlides:!0,slidesPerView:"auto",touchRatio:.2,slideToClickedSlide:!0,slidesOffsetBefore:-65});P.params.control=O,O.params.control=P,function(){var e=(0,i.default)(".left-pic .gallery-top img");(0,n.imgLazy)(e)}(),(0,i.default)(h).text(e.longName),e.labels[0]&&e.labels.forEach(function(e,t){if(t<3)switch(e.id){case 10:y+='<li class="blue">'+e.labelContent+"</li>";break;case 6:y+='<li class="pink">'+e.labelContent+"</li>";break;case 7:y+='<li class="sea">'+e.labelContent+"</li>";break;case 5:y+='<li class="sky">'+e.labelContent+"</li>";break;case 9:y+='<li class="deep-sea">'+e.labelContent+"</li>";break;case 8:y+='<li class="light-pink">'+e.labelContent+"</li>";break;case 1:y+='<li class="light-red">'+e.labelContent+"</li>";break;case 2:y+='<li class="light-yellow">'+e.labelContent+"</li>";break;case 3:y+='<li class="light-green">'+e.labelContent+"</li>";break;case 4:y+='<li class="deep-blue">'+e.labelContent+"</li>";break;default:y+='<li class="sea">'+e.labelContent+"</li>"}}),(0,i.default)(b).html(y),e.relationGoods.forEach(function(e,t){k+=e.mark?"<li data-id="+e.id+' class="active">'+e.name+"</li>":"<li data-id="+e.id+">"+e.name+"</li>"}),(0,i.default)(v).html(k),(0,i.default)(".goods-kind li").each(function(e,t){(0,i.default)(t).on("click",function(){console.log(f,g,m,p),f!=(0,i.default)(t).get(0).dataset.id&&(u=[],f=r,g="",m=0,p="",o((0,i.default)(t).get(0).dataset.id),f=(0,i.default)(t).get(0).dataset.id)})}),e.accessorys.length?(0,i.default)(S).parent().css("display","block"):(0,i.default)(S).parent().css("display","none"),e.accessorys.forEach(function(e,t){w+="<li data-id="+e.id+">"+e.length+"</li>"}),(0,i.default)(S).html(w);var B=0;(0,i.default)(".accessorys li").each(function(e,t){(0,i.default)(t).on("click",function(){(0,i.default)(".accessorys li").eq(B).removeClass("active"),(0,i.default)(t).addClass("active"),B=e,g=(0,i.default)(t).get(0).dataset.id,console.log(f,g,m,p)})}),(0,i.default)(".goods-remain").on("click",function(){1!=m&&(m--,(0,i.default)(".goods-count input").val(m),console.log(f,g,m,p))}),(0,i.default)(".goods-add").on("click",function(){9!=m&&(m++,(0,i.default)(".goods-count input").val(m),console.log(f,g,m,p))});var E="";(0,i.default)(".right-words .words-size .comments-ty").on("input",function(){E.length>=7?(E=E.slice(0,E.length-1),(0,i.default)(this).val(E)):E=(0,i.default)(this).val(),p=E,console.log(f,g,m,p)}),(0,i.default)(C).text(e.salePrice),(0,i.default)(I).text("￥"+e.labelPrice),e.detailPictures.forEach(function(e,t){x+="<img src="+e+">"}),(0,i.default)(N).html(x),function(){var e=(0,i.default)(".img-detail img");(0,n.imgLazy)(e)}();var J=0;(0,i.default)(".right-comment ul li").each(function(e,t){(0,i.default)(t).on("click",function(){0==e?((0,i.default)(".img-detail").css("display","block"),(0,i.default)(".discuss").css("display","none")):((0,i.default)(".img-detail").css("display","none"),(0,i.default)(".discuss").css("display","block")),(0,i.default)(".right-comment ul li").eq(J).removeClass("active"),(0,i.default)(this).addClass("active"),J=e})}),(0,i.default)(".buy-now").on("click",function(){return""==f||""==g||e.custom&&""==p?void alert("有未选项"):(u.push({goodsId:f,accessoryId:g,selected:!1,number:m,comment:p}),(0,n.setSto)("tempOrderPay",JSON.stringify(u)),void(location.href="ok-order.html?from=buy"))});var z=JSON.parse((0,n.getSto)("tempCart"))||[];(0,i.default)(".add-to").on("click",function(){function t(e){(0,n.showImgLayer)("数据请求中..."),(0,n.getSto)("token"),i.default.ajax({type:"post",url:d.default+"/shoppingcart/addShoppingCart",data:e,success:function(e){e.head.code&&(71982==e.head.code&&((0,n.rmSto)("nickname"),(0,n.rmSto)("timestamp"),(0,n.rmSto)("token"),(0,n.rmSto)("vipNo"),alert("出现错误，请重新登录！"),location.href="personal-orders.html"),alert(e.head.message)),(0,n.cartCount)((0,i.default)(".func-public em"))},error:function(){}})}if(""==f||""==g||e.custom&&""==p)return void alert("有未选项");if(c)t({memberNo:c,goodsId:f,accessoryId:g,number:m,comment:p});else{var a={},l=JSON.parse((0,n.getSto)("tempCart")),o=!1,s=!1;g||(g="null"),l?l.forEach(function(e,t){if(e.goodsId==f.toString()&&e.accessoryId==g.toString()&&e.comment==p)return e.number=parseInt(e.number)+parseInt(m),void(o=!0)}):(a={goodsId:f,accessoryId:g,selected:!1,number:m,comment:p},z.push(a),(0,n.setSto)("tempCart",JSON.stringify(z)),s=!0),o?(0,n.setSto)("tempCart",JSON.stringify(l)):o||s||(a={goodsId:f,accessoryId:g,selected:!1,number:m,comment:p},z.push(a),(0,n.setSto)("tempCart",JSON.stringify(z))),(0,n.cartCount)((0,i.default)(".func-public em"))}})},error:function(e){console.log(e)}});var P=(0,i.default)(".guess-like"),O="";i.default.ajax({type:"get",url:d.default+"/home/queryHomeGoodsByPage",data:{type:3,pageNum:1,pageSize:3},success:function(e){if(e.head.code)return void console.log(e.head.message);var e=e.body;e.goodsVoList.forEach(function(e,t){O+='<li class="goods-gife-item">\n                      <div>\n                          <img data-src='+e.goodsPicture+">\n                          <em>￥"+e.salePrice+"</em>\n                          <p>"+e.longName+"</p> \n                      </div>\n                      <a href=product-details.html?id="+e.id+"></a>\n                    </li>"}),(0,i.default)(P).html(O),function(){var e=(0,i.default)(".guess-like img");(0,n.imgLazy)(e)}()},error:function(e){console.log(e)}})}a(2),a(45);var s=a(3),i=l(s),n=a(1),d=l(n),c=(0,n.getSto)("vipNo"),r=(0,n.url_search)().id,u=[],f=r,g="",m=1,p="";(0,n.cartCount)((0,i.default)(".func-public em")),o(r)},45:2});