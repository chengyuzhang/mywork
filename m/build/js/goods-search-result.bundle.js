webpackJsonp([30],{0:function(e,a,t){e.exports=t(36)},36:function(e,a,t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t(2),t(79);var s=t(3),r=o(s),i=t(1),d=o(i),n=t(4);o(n),!function(){var e=(0,r.default)(".wrap");(0,i.reTop)(e)}();var l={type:1,pageNum:1,pageSize:10,keyWord:(0,i.url_search)().keyword},c=d.default+"/search/result/queryGoodsBykeyWordAndPage",u=0,f=[],g=[],h=[],m=[];(0,r.default)(".search-bar>div>input").val((0,i.url_search)().keyword),(0,r.default)(".search-bar>a").on("click",function(e){var a=(0,r.default)(".search-bar>div>input").val();return""==a?void alert("搜索字符不能为空！"):void(window.location.href=encodeURI(encodeURI("goods-search-result.html?keyword="+a)))}),function(){var e=(0,r.default)(".tab-bar>li"),a=(0,r.default)(".tab-bar-con"),t=(0,r.default)(".tab-bar-con>ul").height();e.forEach(function(o,s){o.iBtn="false",(0,r.default)(o).on("click",function(){"false"==o.iBtn?(a.css("height",t+5),e.forEach(function(e,a){o.iBtn="false",(0,r.default)(e).find("em").css("transform","rotate(180deg)")}),o.iBtn="true",(0,r.default)(o).find("em").css("transform","rotate(0deg)")):(a.css("height",0),o.iBtn="false",(0,r.default)(o).find("em").css("transform","rotate(180deg)"))})})}(),function(){function e(e,a,t){a.forEach(function(a,t){e+='<li class="goods-gife-item">\n                <img src="" data-src='+a.goodsPicture+' alt="">\n                <div>\n                    <h3>'+a.longName+"</h3>",e+="<em>￥"+parseInt(a.salePrice)+"</em>",e+='</div>\n                <a href="goods-detail.html?id='+a.id+'"></a>\n            </li>'}),(0,r.default)(t).html(e),function(){var e=(0,r.default)(".goods-gife-list img");(0,i.imgLazy)(e)}(),function(){var e=(0,r.default)(".goods-gife-list1 img");(0,i.imgLazy)(e)}()}function a(e,a,t){console.log("arr:",a),a.forEach(function(a,t){e+='<li class="goods-gife-item">\n                <img src="" data-src='+a.goodsPicture+' alt="">\n                <div>\n                    <h3>'+a.longName+"</h3>",e+="<em>￥"+parseInt(a.salePrice)+"</em>",e+='</div>\n                <a href="goods-detail.html?id='+a.id+'"></a>\n            </li>'}),(0,r.default)(t).append(e),function(){var e=(0,r.default)(".goods-gife-list img");(0,i.imgLazy)(e)}()}function t(e,t){var o=(0,r.default)(t),s=(0,r.default)(".refresh"),d=window.screen.availHeight,n=0,f=null,g=null,h=null,m=0,p=0;o.on("touchstart",function(e){m=e.changedTouches[0].pageY}),o.on("touchmove",function(e){p=e.changedTouches[0].pageY}),o.on("scroll",function(){var t=(0,r.default)(".goods-gife-list li:nth-last-of-type(1)"),o=0;(0,r.default)(".goods-gife-list li").length&&(o=t.offset().top,m-p>=0&&o<d+100&&(clearTimeout(f),f=setTimeout(function(){l.pageNum++,clearTimeout(h),(0,r.default)(s).html("正在加载中..."),(0,r.default)(s).css("bottom",0),r.default.ajax({type:"get",url:c,data:l,success:function(t){if(!t.head.code){var t=t.body;t.end?(u||a(e,t.goodsVoList,(0,r.default)(".goods-gife-list")),u++,n=l.pageNum-1,l.pageNum=n,(0,r.default)(s).html("已经到末尾咯~"),(0,r.default)(s).css("bottom",0),clearTimeout(g),g=setTimeout(function(){(0,r.default)(s).css("bottom","-1rem")},2e3)):(a(e,t.goodsVoList,(0,r.default)(".goods-gife-list")),h=setTimeout(function(){(0,r.default)(s).css("bottom","-1rem")},2e3),u=0),function(){var e=(0,r.default)(".goods-gife-list img");(0,i.imgLazy)(e)}()}}})},1e3)))})}var o=((0,r.default)(".tab-bar"),(0,r.default)(".tab-bar li")),s=(0,r.default)(".tab-bar-con ul"),n=(0,r.default)(".goods-gife-list"),p=((0,r.default)(".goods-gife-list1"),""),y=(0,r.default)(".tab-bar>li"),v=(0,r.default)(".tab-bar-con");r.default.ajax({type:"get",url:d.default+"/search/result/queryConfig",data:{},success:function(a){function t(e,a,t){e.forEach(function(e,o){a+=e.active?'<li class="active" data-id='+e.id+" data-type="+t+">\n                            <span>"+e.name+"</span>\n                            <i></i>\n                        </li>":"<li data-id="+e.id+" data-type="+t+">\n                            <span>"+e.name+"</span>\n                            <i></i>\n                        </li>"}),(0,r.default)(s).html(a)}a.head.code&&console.log(a.head.message);var a=a.body;for(var b in a)a[b].forEach(function(e,a){0==a?e.active=!0:e.active=!1});o.forEach(function(o,s){(0,r.default)(o).on("click",function(){var b="";switch(s){case 0:t(a.sorts,b,"sorts");break;case 1:t(a.styles,b,"styles");break;case 2:t(a.materials,b,"materials");break;case 3:t(a.prices,b,"prices")}var k=(0,r.default)(".tab-bar-con li");k.forEach(function(t,s){(0,r.default)(t).on("click",function(){var b=1,I=10;switch(t.dataset.type){case"sorts":f[0]=parseInt(t.dataset.id);break;case"styles":g[0]=parseInt(t.dataset.id);break;case"materials":h[0]=parseInt(t.dataset.id);break;case"prices":m[0]=parseInt(t.dataset.id)}a[t.dataset.type].forEach(function(e,a){e.active=!1}),a[t.dataset.type][s].active=!0,v.css("height",0),y.forEach(function(e,a){o.iBtn="false",(0,r.default)(e).find("em").css("transform","rotate(180deg)")}),console.log("sortId:",f,"-styleId:",g,"-materialId:",h,"-pricesId:",m),r.default.ajax({type:"get",url:d.default+"/search/result/queryGoodsBykeyWordAndPage",data:{pageNum:b,pageSize:I,sortIds:f,styleIds:g,materialIds:h,priceIds:m,keyWord:(0,i.url_search)().keyword},success:function(a){a.head.code&&console.log(a.head.message);var a=a.body;e(p,a.goodsVoList,n)},error:function(){}}),u=0,l={pageNum:1,pageSize:10,sortIds:f,styleIds:g,materialIds:h,priceIds:m,keyWord:(0,i.url_search)().keyword},c=d.default+"/search/result/queryGoodsBykeyWordAndPage",k.forEach(function(e,a){(0,r.default)(e).removeClass("active")}),(0,r.default)(t).addClass("active")})})})})},error:function(){}}),r.default.ajax({type:"get",url:d.default+"/search/result/queryGoodsBykeyWordAndPage",data:l,success:function(a){a.head.code&&console.log(a.head.message);var a=a.body;e(p,a.goodsVoList,n)},error:function(){}}),t(p,(0,r.default)(".goods-gife-list"))}(),function(){var e=(0,i.getSto)("searchurl",(0,i.prevUrl)());e?(0,r.default)("header>span>a").attr("href",e):((0,r.default)("header>span>a").attr("href",(0,i.prevUrl)()),(0,i.setSto)("searchurl",(0,i.prevUrl)()))}()},79:2});