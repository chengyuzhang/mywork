webpackJsonp([26],{0:function(e,a,t){e.exports=t(42)},42:function(e,a,t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t(2),t(85);var i=t(3),s=o(i),l=t(1),n=o(l),d=t(4);o(d),(0,l.rmSto)("goods-prevurl"),function(){(0,l.tabBar)()}(),(0,l.cartCount)(),function(){function e(e,a,t){a.forEach(function(a,t){e+='<li class="goods-gife-item">\n                <img src="" data-src='+a.goodsPicture+' alt="">\n                <div>\n                    <h3>'+a.shortName+"</h3>\n                    <em>￥"+a.salePrice+'</em>\n                </div>\n                <a href="goods-detail.html?id='+a.id+'"></a>\n            </li>'}),(0,s.default)(t).html(e),function(){var e=(0,s.default)(".goods-gife-list img");(0,l.imgLazy)(e)}(),function(){var e=(0,s.default)(".goods-gife-list1 img");(0,l.imgLazy)(e)}()}function a(e,a,t){console.log("arr:",a),a.forEach(function(a,t){e+='<li class="goods-gife-item">\n                <img src="" data-src='+a.goodsPicture+' alt="">\n                <div>\n                    <h3>'+a.shortName+"</h3>\n                    <em>￥"+a.salePrice+'</em>\n                </div>\n                <a href="goods-detail.html?id='+a.id+'"></a>\n            </li>'}),(0,s.default)(t).append(e),function(){var e=(0,s.default)(".goods-gife-list img");(0,l.imgLazy)(e)}()}function t(e,t){var o=(0,s.default)(t),i=(0,s.default)(".refresh"),n=window.screen.availHeight,r=0,f=null,g=null,m=null,h=0,v=0;o.on("touchstart",function(e){h=e.changedTouches[0].pageY}),o.on("touchmove",function(e){v=e.changedTouches[0].pageY}),o.on("scroll",function(){var t=(0,s.default)(".goods-gife-list li:nth-last-of-type(1)"),o=0;(0,s.default)(".goods-gife-list li").length&&(o=t.offset().top,h-v>=0&&o<n+100&&(clearTimeout(f),f=setTimeout(function(){d.pageNum++,clearTimeout(m),(0,s.default)(i).html("正在加载中..."),(0,s.default)(i).css("bottom",0),s.default.ajax({type:"get",url:c,data:d,success:function(t){if(t.head.code)return console.log(t.head.message),void(0,l.cancelImgLayer)();var t=t.body;t.end?(u||a(e,t.goodsVoList,(0,s.default)(".goods-gife-list")),u++,r=d.pageNum-1,d.pageNum=r,(0,s.default)(i).html("已经到末尾咯~"),(0,s.default)(i).css("bottom",0),clearTimeout(g),g=setTimeout(function(){(0,s.default)(i).css("bottom","-1rem")},2e3)):(a(e,t.goodsVoList,(0,s.default)(".goods-gife-list")),m=setTimeout(function(){(0,s.default)(i).css("bottom","-1rem")},2e3),u=0),function(){var e=(0,s.default)(".goods-gife-list img");(0,l.imgLazy)(e)}()},error:function(e){console.log(e),(0,l.cancelImgLayer)()}})},1e3)))})}var o=((0,s.default)(".tab-bar"),(0,s.default)(".tab-bar li"),(0,s.default)(".goods-gife-list")),i="",d={type:5,pageNum:1,pageSize:10},c=n.default+"/home/queryHomeGoodsByPage",u=0;(0,l.showImgLayer)("数据请求中..."),s.default.ajax({type:"get",url:n.default+"/search/result/queryConfig",data:{},success:function(a){function t(e,a){var t="",o=(0,s.default)("."+a);console.log(o),e.forEach(function(e,o){t+=e.active?'<li class="" data-id='+e.id+" data-type="+a+">\n                            "+e.name+"\n                        </li>":"<li data-id="+e.id+" data-type="+a+">\n                            "+e.name+"\n                        </li>"}),(0,s.default)(o).html(t)}if(console.log("tab:",a),a.head.code)return console.log(a.head.message),void(0,l.cancelImgLayer)();var a=a.body;for(var r in a)a[r].forEach(function(e,a){0==a?e.active=!0:e.active=!1});var f=[1],g=[],m=[],h=[];for(var r in a)"sorts"!=r&&t(a[r],r);(0,l.cancelImgLayer)(),function(){function a(e,a,t){e.iBtn=!0,(0,s.default)(e).on("click",function(){e.iBtn?((0,s.default)(a).css("height","auto"),(0,s.default)(t).addClass("active")):((0,s.default)(a).css("height",".34rem"),(0,s.default)(t).removeClass("active")),e.iBtn=!e.iBtn})}function t(a,t){a.forEach(function(a,r){a.iBtn=!0,(0,s.default)(a).on("click",function(){switch(t){case"styles":a.iBtn?((0,s.default)(a).addClass("active"),g[r]=parseInt(a.dataset.id)):((0,s.default)(a).removeClass("active"),g[r]="");break;case"materials":a.iBtn?((0,s.default)(a).addClass("active"),m[r]=parseInt(a.dataset.id)):((0,s.default)(a).removeClass("active"),m[r]="");break;case"prices":a.iBtn?((0,s.default)(a).addClass("active"),h[r]=parseInt(a.dataset.id)):((0,s.default)(a).removeClass("active"),h[r]="")}console.log("-styleId:",g,"-materialId:",m,"-pricesId:",h),a.iBtn=!a.iBtn,(0,l.showImgLayer)("数据请求中..."),s.default.ajax({type:"get",url:n.default+"/home/list/queryGoodsByParamAndPage",data:{pageNum:1,pageSize:10,sortIds:f,styleIds:g,materialIds:m,priceIds:h},success:function(a){if(a.head.code)return console.log(a.head.message),void(0,l.cancelImgLayer)();var a=a.body;e(i,a.goodsVoList,o),(0,l.cancelImgLayer)()},error:function(e){console.log(e),(0,l.cancelImgLayer)()}}),u=0,d={pageNum:1,pageSize:10,sortIds:f,styleIds:g,materialIds:m,priceIds:h},c=n.default+"/home/list/queryGoodsByParamAndPage"})})}var r=(0,s.default)(".tab-bar-item-top"),v=(0,s.default)(".tab-bar-item ul"),y=(0,s.default)(".tab-bar-item i");r.forEach(function(e,t){a(e,v[t],y[t])});var p=(0,s.default)(".styles li"),I=(0,s.default)(".materials li"),b=(0,s.default)(".prices li");t(p,"styles"),t(I,"materials"),t(b,"prices")}()},error:function(e){console.log(e),(0,l.cancelImgLayer)()}}),s.default.ajax({type:"get",url:n.default+"/home/queryHomeGoodsByPage",data:{type:5,pageNum:1,pageSize:10},success:function(a){if(a.head.code)return console.log(a.head.message),void(0,l.cancelImgLayer)();var a=a.body;e(i,a.goodsVoList,o)},error:function(e){console.log(e),(0,l.cancelImgLayer)()}}),t(i,(0,s.default)(".kind-goods"))}()},85:2});