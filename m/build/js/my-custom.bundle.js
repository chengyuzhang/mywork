webpackJsonp([24],{0:function(t,e,a){t.exports=a(44)},44:function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}a(2),a(87);var s=a(3),r=o(s),n=a(1),d=o(n),c=a(4),i=o(c);!function(){var t=(0,r.default)(".wrap");(0,n.reTop)(t)}(),function(){var t=(0,r.default)(".list"),e="",a=sessionStorage.getItem("vipNo"),o=sessionStorage.getItem("token");r.default.ajax({type:"GET",url:d.default+"/customization/orders?memberNo="+a,headers:(0,n.signName)(i.default,a,o),success:function(s){s.head.code&&(71982==s.head.code&&((0,n.rmSto)("nickname"),(0,n.rmSto)("timestamp"),(0,n.rmSto)("token"),(0,n.rmSto)("vipNo"),alert("出现错误，请重新登录！"),location.href="user-center.html"),alert(s.head.message)),s.body.orders.length||((0,r.default)(".wrap").addClass("no"),(0,r.default)(".wrap").append('<p style="margin-top:3.5rem; color:#999; text-align:center;">您还没有订单，快去定制吧~</p><a style="display:block; width:.89rem; margin-left:1.43rem; margin-top:.4rem; border: 1px solid #CB68A4; color:#CB68A4; text-align:center; line-height:.3rem; border-radius:5px; font-size:.14rem;" href=custom.html?from=my-custom>我要定制</a>')),s.body.orders.forEach(function(t,a){switch(e+="<li>",e+='<div class="status"><span>'+t.createTime+"</span><em data-index="+a+">"+t.statusName+"</em></div>",e+='<div class="goods-detail" data-order="'+t.orderNo+'">',e+='<img src="'+t.cover+'" alt="">',e+="<ol><li>款式："+t.style+"</li><li>材质："+t.material+"</li><li>尺寸："+t.size+"</li></ol></div>",e+='<div class="btn-list"><em>支付金额： ￥'+t.price+"</em>",t.status){case 10:e+='<a href="jump.html" class="contact" >联系客服</a>',e+='<span class="sure" data-order='+t.orderNo+">立即付款</span>";break;case 20:e+='<a href="jump.html" class="contact" >联系客服</a>',e+='<span class="refund" data-order='+t.orderNo+" data-index="+a+">申请退款</span>";break;case 40:e+='<a href="jump.html" class="contact" >联系客服</a>';break;case 60:e+='<a href="jump.html" class="contact" >联系客服</a>';break;case 70:e+='<a href="jump.html" class="contact" >联系客服</a>',e+='<span class="ok" data-order='+t.orderNo+" data-index="+a+">确认收货</span>";break;case 80:e+='<a href="jump.html" class="contact" >联系客服</a>';break;case 31:e+='<a href="jump.html" class="contact" >联系客服</a>',e+='<span class="refund" data-order='+t.orderNo+" data-index="+a+">申请退款</span>";break;case 41:e+='<a href="jump.html" class="contact" >联系客服</a>';break;default:e+='<a href="jump.html" class="contact" >联系客服</a>'}e+="</div></li>"}),t.html(e),function(){var t=(0,r.default)(".goods-detail");t.forEach(function(t,e){(0,r.default)(t).on("click",function(){window.location.href="order-detail.html?orderNo="+(0,r.default)(this).get(0).dataset.order})})}(),function(){function t(t){r.default.ajax({type:"post",headers:(0,n.signName)(i.default,a,o),url:d.default+"/customization/order/pay",data:{orderNo:t},success:function(t){t.head.code&&(71982==t.head.code&&((0,n.rmSto)("nickname"),(0,n.rmSto)("timestamp"),(0,n.rmSto)("token"),(0,n.rmSto)("vipNo"),alert("出现错误，请重新登录！"),location.href="user-center.html"),alert(t.head.message));var e=t.body.form;_AP.pay(e)},error:function(t){console.log(t)}})}var e=(0,r.default)(".sure");e.forEach(function(e,a){(0,r.default)(e).on("click",function(){t((0,r.default)(e).get(0).dataset.order)})})}(),function(){(0,r.default)(".refund")}(),function(){function t(t,e,c,l){r.default.ajax({type:"post",headers:(0,n.signName)(i.default,e,o),url:d.default+"/customization/order/refund",data:{orderNo:t,memberNo:e,reason:l},success:function(t){t.head.code&&(71982==t.head.code&&((0,n.rmSto)("nickname"),(0,n.rmSto)("timestamp"),(0,n.rmSto)("token"),(0,n.rmSto)("vipNo"),alert("出现错误，请重新登录！"),location.href="user-center.html"),alert(t.head.message)),t.body.status&&((0,r.default)(m).eq(c).text("待退款"),(0,r.default)(s).eq(c).find(".refund").css("display","none"),a())},error:function(t){console.log(t)}})}function e(t,e,a){u.attr("data-order",t),u.attr("data-index",e),u.attr("data-type",a),l.css("display","block"),setTimeout(function(){l.css("opacity",1)},50)}function a(){l.css("opacity",0),setTimeout(function(){l.css("display","none"),location.reload()},500)}var s=(0,r.default)(".list>li"),c=(0,r.default)(".refund"),l=(0,r.default)(".opacity"),u=(0,r.default)(".opacity .con li:last-of-type"),f=(0,r.default)(".opacity .con li:first-of-type"),m=(0,r.default)(".list .status>em");c.forEach(function(t,a){(0,r.default)(t).on("click",function(){(0,r.default)(".opacity .reason input").css("display","block"),e((0,r.default)(t).get(0).dataset.order,(0,r.default)(t).get(0).dataset.index,(0,r.default)(t).get(0).className)})}),u.on("click",function(){var e=sessionStorage.getItem("vipNo"),a=(0,r.default)(".opacity .reason input").val();"refund"==(0,r.default)(this).get(0).dataset.type&&t((0,r.default)(this).get(0).dataset.order,e,(0,r.default)(this).get(0).dataset.index,a)}),f.on("click",function(){a()})}(),function(){function t(t,e,c){r.default.ajax({type:"post",headers:(0,n.signName)(i.default,e,o),url:d.default+"/customization/order/confirm",data:{orderNo:t,memberNo:e},success:function(t){t.head.code&&(71982==t.head.code&&((0,n.rmSto)("nickname"),(0,n.rmSto)("timestamp"),(0,n.rmSto)("token"),(0,n.rmSto)("vipNo"),alert("出现错误，请重新登录！"),location.href="user-center.html"),alert(t.head.message)),t.body.status&&((0,r.default)(m).eq(c).text("已完成"),(0,r.default)(s).eq(c).find(".ok").css("display","none"),a())},error:function(t){console.log(t)}})}function e(t,e,a){u.attr("data-order",t),u.attr("data-index",e),u.attr("data-type",a),l.css("display","block"),setTimeout(function(){l.css("opacity",1)},50)}function a(){l.css("opacity",0),setTimeout(function(){l.css("display","none"),location.reload()},500)}var s=(0,r.default)(".list>li"),c=(0,r.default)(".ok"),l=(0,r.default)(".opacity"),u=(0,r.default)(".opacity .con li:last-of-type"),f=(0,r.default)(".opacity .con li:first-of-type"),m=(0,r.default)(".list .status>em");c.forEach(function(t,a){(0,r.default)(t).on("click",function(){(0,r.default)(".opacity .reason input").css("display","none"),(0,r.default)(".opacity .reason h2").text("确认收货"),(0,r.default)(".opacity .reason p").text("是否确认已经收到货品？"),e((0,r.default)(t).get(0).dataset.order,(0,r.default)(t).get(0).dataset.index,(0,r.default)(t).get(0).className)})}),u.on("click",function(){var e=sessionStorage.getItem("vipNo");"ok"==(0,r.default)(this).get(0).dataset.type&&t((0,r.default)(this).get(0).dataset.order,e,(0,r.default)(this).get(0).dataset.index)}),f.on("click",function(){a()})}()},error:function(t){console.log(t)}})}()},87:2});