webpackJsonp([14],{0:function(e,t,a){e.exports=a(55)},55:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function l(e){e.forEach(function(e,t){var a="",o="",l=(0,d.default)(".recomand li.item>section.block div.img-wrap").height(),s=(0,d.default)(".recomand li.item>section.block div.img-wrap").width();(0,d.default)(e).get(0).onload=function(){a=(0,d.default)(e).get(0).offsetWidth,o=(0,d.default)(e).get(0).offsetHeight,a/o>1.675?(0,d.default)(e).css({height:l,left:"50%","margin-left":-a*l/o/2}):(0,d.default)(e).css({width:s,top:"50%","margin-top":-o*s/a/2})}})}a(2),a(98);var s=a(3),d=o(s),i=a(1),n=o(i),r=a(4),c=o(r);console.log((0,i.allLto)()),function(){var e=(0,d.default)(".wrap");(0,i.reTop)(e)}();var u=(0,i.getSto)("vipNo");!function(){switch((0,i.url_search)().from){case"index":(0,d.default)(".search-bar>span>a").attr("href","index.html");break;case"gife":(0,d.default)(".search-bar>span>a").attr("href","gife-list.html");break;case"goods":(0,d.default)(".search-bar>span>a").attr("href","goods-list.html");break;case"children":(0,d.default)(".search-bar>span>a").attr("href","children-list.html");break;case"custom":(0,d.default)(".search-bar>span>a").attr("href","custom-list.html")}}(),function(){var e=(0,d.default)(".search-bar>div>i"),t=(0,d.default)(".search-bar>div>input");e.on("click",function(e){(0,d.default)(t).val(""),(0,d.default)(t).get(0).focus(),e.stopPropagation()})}(),function(){var e=(0,d.default)(".search-bar>div>input"),t=(0,d.default)(".goods-history ul"),a=(0,d.default)(".search-bar>a");if((0,d.default)(document).on("click",function(){(0,d.default)(".goods-history").css("display","none")}),e.on("click",function(e){e.stopPropagation()}),u)(0,d.default)(a).on("click",function(t){var a=e.val(),o=(0,i.getSto)("token");""!=a?d.default.ajax({type:"get",headers:(0,i.signName)(c.default,u,o),url:n.default+"/user/search/add",data:{memberNo:u,searchContent:a,businessCase:2},success:function(e){return e.head.code?(71982==e.head.code&&((0,i.rmSto)("nickname"),(0,i.rmSto)("timestamp"),(0,i.rmSto)("token"),(0,i.rmSto)("vipNo"),alert("出现错误，请重新登录！"),location.href="user-center.html"),void alert(e.head.message)):void(window.location.href=encodeURI(encodeURI("goods-search-result.html?keyword="+a)))},error:function(e){console.log(e)}}):alert("搜索内容不能为空")}),e.on("focus",function(e){var a="";d.default.ajax({type:"get",headers:(0,i.signName)(c.default,u,(0,i.getSto)("token")),url:n.default+"/user/search/get",data:{memberNo:u,businessCase:2},success:function(e){e.head.code&&(cancelImgLayer(),71982==e.head.code&&((0,i.rmSto)("nickname"),(0,i.rmSto)("timestamp"),(0,i.rmSto)("token"),(0,i.rmSto)("vipNo"),alert("出现错误，请重新登录！"),location.href="user-center.html"),alert(e.head.message));var o=e.body.searchs;o.forEach(function(e,t){a+="<li>",a+="<i></i><span>"+e.searchContent+"</span><a id="+e.id+' href="javascript:;"></a>',a+="</li>"}),t.html(a);var s=(0,d.default)(".show-pic");l(s),(0,d.default)(".goods-history").css("display","block"),function(){var e=(0,d.default)(".goods-history>ul>li");e.forEach(function(e,t){(0,d.default)(e).on("click",function(t){window.location.href=encodeURI(encodeURI("goods-search-result.html?keyword="+(0,d.default)(e).find("span").text())),t.stopPropagation()})})}(),(0,d.default)(".goods-history ul>li").length<=2&&(0,d.default)(".show-all").css("display","none"),0==(0,d.default)(".goods-history ul>li").length&&(0,d.default)(".clear-record").css("display","none"),(0,d.default)(".goods-history ul>li").length>0&&(0,d.default)(".clear-record").css("display","block"),(0,d.default)(".goods-history ul>li").length>2&&(t.height(".72rem"),(0,d.default)(".show-all").css("display","block"),(0,d.default)(".clear-record").css("display","none")),(0,d.default)(".show-all").on("click",function(e){e.stopPropagation();var a=(0,d.default)(".goods-history ul>li").length*(0,d.default)(".goods-history ul>li").eq(0).height();(0,d.default)(this).css("display","none"),t.css("height",a),(0,d.default)(".clear-record").css("display","block"),setTimeout(function(){t.css("height","auto")},300)}),(0,d.default)(".clear-record").on("click",function(e){e.stopPropagation();var a=(0,i.getSto)("token");d.default.ajax({type:"get",url:n.default+"/user/search/delete",data:{memberNo:u,searchId:0,businessCase:2},headers:(0,i.signName)(c.default,u,a),success:function(e){return e.head.code?(71982==e.head.code&&((0,i.rmSto)("nickname"),(0,i.rmSto)("timestamp"),(0,i.rmSto)("token"),(0,i.rmSto)("vipNo"),alert("出现错误，请重新登录！"),location.href="user-center.html"),void alert(e.head.message)):void(e.body.status&&((0,d.default)(".goods-history ul>li").remove(),(0,d.default)(".show-all").css("display","none"),(0,d.default)(".clear-record").css("display","none"),t.height("auto")))},error:function(e){console.log(e)}})});var r=(0,d.default)(".goods-history ul>li>a");r.forEach(function(e,a){(0,d.default)(e).on("click",function(a){a.stopPropagation();var o=(0,i.getSto)("token");d.default.ajax({type:"get",url:n.default+"/user/search/delete",data:{memberNo:u,searchId:e.id,businessCase:2},headers:(0,i.signName)(c.default,u,o),success:function(a){return a.head.code?(71982==a.head.code&&((0,i.rmSto)("nickname"),(0,i.rmSto)("timestamp"),(0,i.rmSto)("token"),(0,i.rmSto)("vipNo"),alert("出现错误，请重新登录！"),location.href="user-center.html"),void alert(a.head.message)):void(a.body.status&&((0,d.default)(e).parent().remove(),(0,d.default)(".goods-history>ul>li").length<=2&&((0,d.default)(".show-all").css("display","none"),t.css("height","auto")),0==(0,d.default)(".goods-history>ul>li").length&&(0,d.default)(".clear-record").css("display","none")))},error:function(e){console.log(e)}})})})},error:function(){}}),e.stopPropagation()});else{var o,s=function(){o=JSON.parse((0,i.getLto)("goodsSearchRecord")),o&&r(o)},r=function(e){var a="";e.forEach(function(e,t){a+="<li>",a+="<i></i><span>"+e+'</span><a href="javascript:;"></a>',a+="</li>"}),t.html(a),(0,d.default)(".goods-history").css("display","block"),function(){var e=(0,d.default)(".goods-history>ul>li");e.forEach(function(e,t){(0,d.default)(e).on("click",function(){window.location.href=encodeURI(encodeURI("goods-search-result.html?keyword="+(0,d.default)(e).find("span").text()))})})}(),(0,d.default)(".goods-history ul>li").length>0&&(0,d.default)(".clear-record").css("display","block"),(0,d.default)(".goods-history ul>li").length>2&&(t.height(".72rem"),(0,d.default)(".show-all").css("display","block"),(0,d.default)(".clear-record").css("display","none")),f()},f=function(){var e=(0,d.default)(".goods-history ul>li>a");e.forEach(function(e,a){(0,d.default)(e).on("click",function(e){(0,d.default)(this).parent().remove();var a=(0,d.default)(this).parent().text();o.splice(d.default.inArray(a,o),1),o.length<=2&&((0,d.default)(".show-all").css("display","none"),t.css("height","auto")),0==o.length&&(0,d.default)(".clear-record").css("display","none"),(0,i.rmLto)("goodsSearchRecord"),(0,i.setLto)("goodsSearchRecord",JSON.stringify(o)),e.stopPropagation()})})};e.on("focus",function(e){o=JSON.parse((0,i.getLto)("goodsSearchRecord")),s(),e.stopPropagation()}),(0,d.default)(a).on("click",function(){var t=e.val();o||(o=[]),""!=t&&(o.push(t),o=(0,i.noRepeat)(o),(0,i.setLto)("goodsSearchRecord",JSON.stringify(o)),window.location.href=encodeURI(encodeURI("goods-search-result.html?keyword="+t)))}),(0,d.default)(".goods-history ul>li").length<=2&&(0,d.default)(".show-all").css("display","none"),0==(0,d.default)(".goods-history ul>li").length&&(0,d.default)(".clear-record").css("display","none"),(0,d.default)(".show-all").on("click",function(){var e=(0,d.default)(".goods-history ul>li").length*(0,d.default)(".goods-history ul>li").eq(0).height();(0,d.default)(this).css("display","none"),t.css("height",e),(0,d.default)(".clear-record").css("display","block"),setTimeout(function(){t.css("height","auto")},300)}),(0,d.default)(".clear-record").on("click",function(){o=[],(0,d.default)(".goods-history ul>li").remove(),localStorage.removeItem("goodsSearchRecord"),(0,d.default)(".show-all").css("display","none"),(0,d.default)(this).css("display","none"),t.height("auto")})}}();var f={type:2,pageNum:1,pageSize:10},h=n.default+"/home/queryHomeGoodsByPage",g=0,m=[],p=[],y=[],v=[],b=[],k=[];!function(){function e(e,t,a){t.forEach(function(t,a){e+='<li class="goods-gife-item">',e+='<img src="" alt="" data-src='+t.goodsPicture+">\n                <div>\n                    <p>"+t.shortName+"</p>\n                    <em>￥"+t.salePrice+"</em>\n                </div>\n                <a href=goods-detail.html?id="+t.id+"></a>",e+="</li>"}),(0,d.default)(a).html(e),function(){var e=(0,d.default)(".goods-gife-list img");(0,i.imgLazy)(e)}()}var t=null;(0,d.default)(".kind-gife .for-who").get(0).onclick=(0,d.default)(".kind-gife .for-what").get(0).onclick=function(){(0,d.default)(".opacity").css("display","block"),t=setTimeout(function(){(0,d.default)(".opacity").css("opacity",1)},50)},(0,d.default)(".close").get(0).onclick=function(){(0,d.default)(".opacity").css("opacity",0),t=setTimeout(function(){(0,d.default)(".opacity").css("display","none")},550)};var a=((0,d.default)(".for-who-ul"),(0,d.default)(".for-what-ul")),o=(0,d.default)(".for-who-ul li"),l=((0,d.default)(".for-what-ul li"),(0,d.default)(".for-what-h")),s=(0,d.default)(".kind-gife>ul"),r="",c="";d.default.ajax({type:"get",url:n.default+"/home/queryLabels",data:{},success:function(i){i.head.code&&console.log(i.head.message);var i=i.body;i.labels.forEach(function(e,t){r+=t%2?'<li class="active2"><a href="goods-search-result.html?keyword='+e.labelContent+'">'+e.labelContent+"</a></li>":'<li class="active1"><a href="goods-search-result.html?keyword='+e.labelContent+'">'+e.labelContent+"</a></li>"}),(0,d.default)(s).html(r),i.labels.forEach(function(e,t){c+="<li data-id="+e.id+">"+e.labelContent+"<i></i></li>"}),(0,d.default)(a).html(c);var u=(0,d.default)(".for-what-ul li");u.forEach(function(e,t){(0,d.default)(e).attr("data-btn","true"),(0,d.default)(e).on("click",function(){(0,d.default)(this).hasClass("active")?((0,d.default)(e).attr("data-btn","true"),(0,d.default)(e).removeClass("active"),k[0]="",(0,d.default)(".for-what p").text("为了庆祝什么？")):(u.forEach(function(e,t){(0,d.default)(e).attr("data-btn","true"),(0,d.default)(e).removeClass("active")}),(0,d.default)(this).attr("data-btn","false"),(0,d.default)(this).addClass("active"),k[0]=parseInt(e.dataset.id),(0,d.default)(".for-what p").text((0,d.default)(this).text()))})}),o.forEach(function(e,t){(0,d.default)(e).attr("data-btn","true"),(0,d.default)(e).on("click",function(){(0,d.default)(this).hasClass("active")?((0,d.default)(e).attr("data-btn","true"),(0,d.default)(e).removeClass("active"),b[0]="",(0,d.default)(".for-who p").text("送给谁？")):(o.forEach(function(e,t){(0,d.default)(e).attr("data-btn","true"),(0,d.default)(e).removeClass("active")}),(0,d.default)(this).attr("data-btn","false"),(0,d.default)(this).addClass("active"),b[0]=parseInt(e.dataset.id),(0,d.default)(".for-who p").text((0,d.default)(this).text())),o.forEach(function(e,t){(0,d.default)(e).hasClass("parents")&&(u.forEach(function(e,t){(0,d.default)(e).attr("data-btn","true"),(0,d.default)(e).removeClass("active"),(0,d.default)(".for-what p").text("为了庆祝什么？")}),"false"==(0,d.default)(e).attr("data-btn")?(l.css("display","none"),a.css("display","none")):"true"==(0,d.default)(e).attr("data-btn")&&(l.css("display","block"),a.css("display","block")),k[0]="")})})}),(0,d.default)(".btn").get(0).onclick=function(){(0,d.default)(".opacity").css("opacity",0),t=setTimeout(function(){(0,d.default)(".opacity").css("display","none")},550),console.log("targetId:",b,"-labelId:",k),d.default.ajax({type:"get",url:n.default+"/home/list/queryGoodsByParamAndPage",data:{pageNum:1,pageSize:10,targetIds:b,labelIds:k,sortIds:m,styleIds:p,materialIds:y,priceIds:v},success:function(t){console.log("data:",t),t.head.code&&console.log(t.head.message);var t=t.body,a=(0,d.default)(".goods-gife-list"),o="";e(o,t.goodsVoList,a),(0,d.default)(".recommend-title").css("display","none")},error:function(){}}),g=0,f={pageNum:1,pageSize:10,targetIds:b,labelIds:k,sortIds:m,styleIds:p,materialIds:y,priceIds:v},h=n.default+"/home/list/queryGoodsByParamAndPage"}},error:function(){}})}(),function(){function e(e,t,a){t.forEach(function(t,a){e+='<li class="goods-gife-item">',e+='<img src="" alt="" data-src='+t.goodsPicture+">\n                <div>\n                    <p>"+t.shortName+"</p>\n                    <em>￥"+t.salePrice+"</em>\n                </div>\n                <a href=goods-detail.html?id="+t.id+"></a>",e+="</li>"}),(0,d.default)(a).html(e),function(){var e=(0,d.default)(".goods-gife-list img");(0,i.imgLazy)(e)}(),function(){var e=(0,d.default)(".goods-gife-list1 img");(0,i.imgLazy)(e)}()}function t(e,t,a){console.log("arr:",t),t.forEach(function(t,a){e+='<li class="goods-gife-item">',e+='<img src="" alt="" data-src='+t.goodsPicture+">\n                <div>\n                    <p>"+t.shortName+"</p>\n                    <em>￥"+t.salePrice+"</em>\n                </div>\n                <a href=goods-detail.html?id="+t.id+"></a>",e+="</li>"}),(0,d.default)(a).append(e),function(){var e=(0,d.default)(".goods-gife-list img");(0,i.imgLazy)(e)}()}function a(e,a){var o=(0,d.default)(a),l=(0,d.default)(".refresh"),s=window.screen.availHeight,n=0,r=null,c=null,u=null,m=0,p=0;o.on("touchstart",function(e){m=e.changedTouches[0].pageY}),o.on("touchmove",function(e){p=e.changedTouches[0].pageY}),o.on("scroll",function(){var a=(0,d.default)(".goods-gife-list li:nth-last-of-type(1)"),o=0;(0,d.default)(".goods-gife-list li").length&&(o=a.offset().top,m-p>=0&&o<s+100&&(clearTimeout(r),r=setTimeout(function(){f.pageNum++,clearTimeout(u),(0,d.default)(l).html("正在加载中..."),(0,d.default)(l).css("bottom",0),d.default.ajax({type:"get",url:h,data:f,success:function(a){if(!a.head.code){var a=a.body;a.end?(g||t(e,a.goodsVoList,(0,d.default)(".goods-gife-list")),g++,n=f.pageNum-1,f.pageNum=n,(0,d.default)(l).html("已经到末尾咯~"),(0,d.default)(l).css("bottom",0),clearTimeout(c),c=setTimeout(function(){(0,d.default)(l).css("bottom","-1rem")},2e3)):(t(e,a.goodsVoList,(0,d.default)(".goods-gife-list")),u=setTimeout(function(){(0,d.default)(l).css("bottom","-1rem")},2e3),g=0),function(){var e=(0,d.default)(".goods-gife-list img");(0,i.imgLazy)(e)}()}}})},1e3)))})}var o=(0,d.default)(".goods-gife-list"),l="";d.default.ajax({type:"get",url:n.default+"/home/queryHomeGoodsByPage",data:{type:2,pageNum:1,pageSize:10},success:function(t){t.head.code&&console.log(t.head.message);var t=t.body;e(l,t.goodsVoList,o)},error:function(){}}),a(l,(0,d.default)(".wrap"))}()},98:2});