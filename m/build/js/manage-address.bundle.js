webpackJsonp([25],{0:function(e,t,a){e.exports=a(43)},43:function(e,t,a){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=[];for(var a in e)t.push(a+"="+e[a]);return t.join("&")}function i(e){for(var t={},a=e.split("&"),d=0;d<a.length;d++){var l=a[d].split("=");t[l[0]]=l[1]}return t}a(2),a(86);var r=a(3),s=d(r),n=a(1),o=d(n),u=a(4),f=d(u);!function(){var e=(0,n.getSto)("centerurl");"center"==(0,n.url_search)().f?(0,s.default)("header>a").attr("href","user-center.html"):"cart"!=(0,n.url_search)().f||e?"cart"==(0,n.url_search)().f&&e?(0,s.default)("header>a").attr("href",(0,n.getSto)("centerurl")):(0,s.default)("header>a").attr("href","order.html"):((0,n.setSto)("centerurl",(0,n.prevUrl)()),(0,s.default)("header>a").attr("href",(0,n.prevUrl)()))}(),function(){var e=(0,s.default)(".list"),t=sessionStorage.getItem("vipNo"),a=sessionStorage.getItem("token"),d=window.location.search,r="";""!=d&&(r=i(d.split("?")[1])),s.default.ajax({url:o.default+"/address?memberNo="+t,headers:(0,n.signName)(f.default,t,a),success:function(d){console.log(d);var i=d;i.length||((0,s.default)(".wrap").addClass("no"),(0,s.default)(".wrap").append('<p style="margin-top:3rem; color:#999; text-align:center;">暂无收货地址，快去添加吧~</p>'));var u="";i.forEach(function(e,t){u+='<li id="'+e.id+'">',u+='<div class="people"><span>收货人：'+e.consignee+"</span><em>"+e.mobile+"</em></div>",u+="<p>详细地址："+e.zone+e.detail+"</p>",u+=e.defaultAddr?'<div class="btn-list"><div class="default"><i class="active"></i><span>设为默认</span></div>':'<div class="btn-list"><div class="default"><i class=""></i><span>设为默认</span></div>',u+='<div class="delete"><i></i><span>删除</span></div>',u+='<div class="edit" data-default="'+e.defaultAddr+'" data-zone="'+e.zone+'" data-address="'+e.detail+'"><i></i><span>编辑</span></div>',"true"==r.jump?(console.log(12345),u+="manage-address"==(0,n.url_search)().to?'</div><a href="ok-order.html?type='+(0,n.url_search)().type+"&from="+(0,n.url_search)().f+"&vipId="+e.id+'&jump=true"></a></li>':'</div><a href="order.html?vipId='+e.id+'&jump=true"></a></li>'):u+='</div><a href="#"></a></li>'}),e.html(u),function(){function e(e){p.attr("data-index",e),c.css("display","block"),setTimeout(function(){c.css("opacity",1)},50)}function d(){c.css("opacity",0),setTimeout(function(){c.css("display","none")},500)}var l=(0,s.default)(".list>li"),i=(0,s.default)(".list>li .default"),r=(0,s.default)(".list>li .edit"),u=(0,s.default)(".list>li .delete"),c=(0,s.default)(".opacity"),p=(0,s.default)(".opacity .con li:last-of-type"),h=(0,s.default)(".opacity .con li:first-of-type");i.forEach(function(e,d){(0,s.default)(e).on("click",function(){var u=(0,s.default)(l).get(d).id;r.forEach(function(e,t){(0,s.default)(e).get(0).dataset.default="false"}),s.default.ajax({type:"post",url:o.default+"/address/default",headers:(0,n.signName)(f.default,t,a),data:{memberNo:t,id:u},success:function(t){t&&(i.forEach(function(e,t){(0,s.default)(e).find("i").removeClass("active")}),(0,s.default)(e).find("i").addClass("active"),(0,s.default)(r).eq(d).get(0).dataset.default="true")},error:function(e){console.log(e),alert("设置默认地址失败！")}})})}),u.forEach(function(t,a){(0,s.default)(t).on("click",function(){e(a)})}),p.on("click",function(){s.default.ajax({type:"post",url:o.default+"/address/"+l[(0,s.default)(p).get(0).dataset.index].id+"/delete",headers:(0,n.signName)(f.default,t,a),success:function(e){e&&(d(),l[(0,s.default)(p).get(0).dataset.index].remove(),sessionStorage.setItem("addressID",0),window.location.reload())},error:function(e){console.log(e)}})}),h.on("click",function(){d()})}(),function(){var e=(0,s.default)(".edit");e.forEach(function(e,t){(0,s.default)(e).on("click",function(){var t=(0,s.default)(this).parent().parent(),a={name:(0,s.default)(t).find(".people span").html().split("：")[1],tel:(0,s.default)(t).find(".people em").html(),zone:(0,s.default)(this).get(0).dataset.zone,address:(0,s.default)(this).get(0).dataset.address,id:(0,s.default)(t).get(0).id,jump:r.jump,type:(0,n.url_search)().type,vipId:r.vipId,defaultAddress:(0,s.default)(e).get(0).dataset.default};(0,n.url_search)().f?window.location.href="edit-address.html?"+l(a)+"&from=ok-order&f="+(0,n.url_search)().f:window.location.href="edit-address.html?"+l(a)})})}(),function(){var e=(0,s.default)(".add");e.on("click",function(){(0,n.url_search)().f?window.location.href="add-address.html?type="+(0,n.url_search)().type+"&from=ok-order&jump="+r.jump+"&vipId="+r.vipId+"&f="+(0,n.url_search)().f:window.location.href="add-address.html?jump="+r.jump+"&vipId="+r.vipId})}()},error:function(e){console.log("err:",e)}})}()},86:2});