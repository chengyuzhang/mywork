webpackJsonp([20],{0:function(t,e,o){t.exports=o(48)},48:function(t,e,o){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}o(2),o(91);var s=o(3),d=a(s),r=o(1),n=a(r),i=o(4),c=a(i);(0,r.getSto)("prevurl")&&(console.log(12345),(0,r.rmSto)("prevurl"));var l=(0,r.getSto)("vipNo");!function(){var t=(0,d.default)(".wrap");(0,r.reTop)(t)}(),function(){function t(t,e,o){console.log("xx:::",e),e.forEach(function(e,o){if(e.goodsList.length)if(e.categoryNum>2){if(t+='<li class="goods-item more">',t+="<h2>"+a(e.statusCode)+"</h2>",t+='<div class="goods-intr">\n\t\t                    <div class="goods-intr-wrap">',e.goodsList.forEach(function(o,a){t+='<div class="goods-imgs">\n\t\t\t                            <img src="" data-src='+e.goodsList[a].picture+' alt="">\n\t\t\t                        </div>'}),t+='</div>\n\t\t                    <a href="custom-detail.html?orderNo='+e.orderNo+"&statusCode="+e.statusCode+'"></a>\n\t\t                </div>\n\t\t                <div class="goods-price">\n\t\t                    <span>共'+e.number+"件商品</span>\n\t\t                    <i>实付款：￥"+e.orderPrice+"</i>",s(e.statusCode).length)for(var d=s(e.statusCode).length-1;d>=0;d--)t+="确认收货"==s(e.statusCode)[d]?'<em  class="ok" data-order='+e.orderNo+" data-index="+o+">"+s(e.statusCode)[d]+"</em>":"查看物流"==s(e.statusCode)[d]?'<em class="check" data-order='+e.orderNo+'><a href="custom-detail.html?orderNo='+e.orderNo+"&statusCode="+e.statusCode+'#express">'+s(e.statusCode)[d]+"</a></em>":'<em class="server" data-order='+e.orderNo+">"+s(e.statusCode)[d]+"</em>";t+="</div>\n\t\t            </li>"}else{if(t+='<li class="goods-item one">',t+="<h2>"+a(e.statusCode)+"</h2>",t+='<div class="goods-intr">\n\t\t                    <div class="goods-imgs">\n\t\t                        <img src="" data-src='+e.goodsList[0].picture+' alt="">\n\t\t                    </div>\n\t\t                    <div class="goods-detail">\n\t\t                        <h3>'+e.goodsList[0].longName+"</h3>\n\t\t                        <p>",e.goodsList[0].accessoryName&&(t+="<span>配件："+e.goodsList[0].accessoryName+"</span>"),t+="</p>\n\t\t                        <p>",e.goodsList[0].comment&&(t+="<span>备注："+e.goodsList[0].comment+"</span>"),t+='</p>\n\t\t                    </div>\n\t\t                    <a href="custom-detail.html?orderNo='+e.orderNo+"&statusCode="+e.statusCode+'"></a>\n\t\t                </div>\n\t\t                <div class="goods-price">\n\t\t                    <span>共'+e.number+"件商品</span>\n\t\t                    <i>实付款：￥"+e.orderPrice+"</i>",s(e.statusCode).length)for(var d=s(e.statusCode).length-1;d>=0;d--)t+="确认收货"==s(e.statusCode)[d]?'<em  class="ok" data-order='+e.orderNo+" data-index="+o+">"+s(e.statusCode)[d]+"</em>":"查看物流"==s(e.statusCode)[d]?'<em class="check" data-order='+e.orderNo+'><a href="custom-detail.html?orderNo='+e.orderNo+"&statusCode="+e.statusCode+'#express">'+s(e.statusCode)[d]+"</a></em>":'<em class="server" data-order='+e.orderNo+">"+s(e.statusCode)[d]+"</em>";t+="</div>\n\t\t            </li>"}}),(0,d.default)(o).html(t),function(){var t=(0,d.default)(".goods-item img");(0,r.imgLazy)(t)}(),(0,d.default)(".more .goods-intr-wrap").forEach(function(t,e){(0,d.default)(t).css("width",(0,d.default)(t).find(".goods-imgs").width()*(0,d.default)(t).find(".goods-imgs").length)}),function(){var t=(0,d.default)(".goods-price>em");t.forEach(function(t,e){"去支付"==(0,d.default)(t).text()&&(0,d.default)(t).on("click",function(){d.default.ajax({type:"post",headers:(0,r.signName)(c.default,l,g),url:n.default+"/shoporder/pay",data:{memberNo:l,orderNo:(0,d.default)(t).get(0).dataset.order},success:function(t){if(t.head.code)return 71982==t.head.code&&((0,r.rmSto)("nickname"),(0,r.rmSto)("timestamp"),(0,r.rmSto)("token"),(0,r.rmSto)("vipNo"),alert("出现错误，请重新登录！"),location.href="user-center.html"),void console.log(t.head.message);var e=t.body.form;_AP.pay(e)},error:function(t){console.log(t)}})})})}(),function(){function t(t,e,s){var i=(0,r.getSto)("token");d.default.ajax({type:"post",headers:(0,r.signName)(c.default,e,i),url:n.default+"/shoporder/confirm",data:{orderNo:t,memberNo:e},success:function(t){return t.head.code?(71982==t.head.code&&((0,r.rmSto)("nickname"),(0,r.rmSto)("timestamp"),(0,r.rmSto)("token"),(0,r.rmSto)("vipNo"),alert("出现错误，请重新登录！"),location.href="user-center.html"),void console.log(t.head.message)):((0,d.default)(f).eq(s).text("已完成"),(0,d.default)(a).eq(s).find(".ok").css("display","none"),void o())},error:function(t){console.log(t)}})}function e(t,e,o){l.attr("data-order",t),l.attr("data-index",e),l.attr("data-type",o),i.css("display","block"),setTimeout(function(){i.css("opacity",1)},50)}function o(){i.css("opacity",0),setTimeout(function(){i.css("display","none"),location.reload()},500)}var a=(0,d.default)(".list>li"),s=(0,d.default)(".ok"),i=(0,d.default)(".opacity"),l=(0,d.default)(".opacity .con li:last-of-type"),u=(0,d.default)(".opacity .con li:first-of-type"),f=(0,d.default)(".list .status>em");s.forEach(function(t,o){(0,d.default)(t).on("click",function(){e((0,d.default)(t).get(0).dataset.order,(0,d.default)(t).get(0).dataset.index,(0,d.default)(t).get(0).className)})}),l.on("click",function(){var e=sessionStorage.getItem("vipNo");"ok"==(0,d.default)(this).get(0).dataset.type&&t((0,d.default)(this).get(0).dataset.order,e,(0,d.default)(this).get(0).dataset.index)}),u.on("click",function(){o()})}(),function(){var t=(0,d.default)(".goods-price>em");t.forEach(function(t,e){"联系客服"==(0,d.default)(t).text()&&(0,d.default)(t).on("click",function(){location.href="jump.html"})})}()}function e(t,e,o){console.log(e),console.log("str:",t),e.forEach(function(e,o){if(e.goodsList.length)if(e.categoryNum>2){if(t+='<li class="goods-item more">',t+="<h2>"+a(e.statusCode)+"</h2>",t+='<div class="goods-intr">\n\t\t                    <div class="goods-intr-wrap">',e.goodsList.forEach(function(o,a){t+='<div class="goods-imgs">\n\t\t\t                            <img src="" data-src='+e.goodsList[a].picture+' alt="">\n\t\t\t                        </div>'}),t+='</div>\n\t\t                    <a href="custom-detail.html?orderNo='+e.orderNo+"&statusCode="+e.statusCode+'"></a>\n\t\t                </div>\n\t\t                <div class="goods-price">\n\t\t                    <span>共'+e.number+"件商品</span>\n\t\t                    <i>实付款：￥"+e.orderPrice+"</i>",s(e.statusCode).length)for(var d=s(e.statusCode).length-1;d>=0;d--)t+="确认收货"==s(e.statusCode)[d]?'<em  class="ok" data-order='+e.orderNo+" data-index="+o+">"+s(e.statusCode)[d]+"</em>":"查看物流"==s(e.statusCode)[d]?'<em class="check" data-order='+e.orderNo+'><a href="custom-detail.html?orderNo='+e.orderNo+"&statusCode="+e.statusCode+'#express">'+s(e.statusCode)[d]+"</a></em>":'<em class="server" data-order='+e.orderNo+">"+s(e.statusCode)[d]+"</em>";t+="</div>\n\t\t            </li>"}else{if(t+='<li class="goods-item one">',t+="<h2>"+a(e.statusCode)+"</h2>",t+='<div class="goods-intr">\n\t\t                    <div class="goods-imgs">\n\t\t                        <img src="" data-src='+e.goodsList[0].picture+' alt="">\n\t\t                    </div>\n\t\t                    <div class="goods-detail">\n\t\t                        <h3>'+e.goodsList[0].longName+"</h3>\n\t\t                        <p>",e.goodsList[0].accessoryName&&(t+="<span>配件："+e.goodsList[0].accessoryName+"</span>"),t+="</p>\n\t\t                        <p>",e.goodsList[0].comment&&(t+="<span>备注："+e.goodsList[0].comment+"</span>"),t+='</p>\n\t\t                    </div>\n\t\t                    <a href="custom-detail.html?orderNo='+e.orderNo+"&statusCode="+e.statusCode+'"></a>\n\t\t                </div>\n\t\t                <div class="goods-price">\n\t\t                    <span>共'+e.number+"件商品</span>\n\t\t                    <i>实付款：￥"+e.orderPrice+"</i>",s(e.statusCode).length)for(var d=s(e.statusCode).length-1;d>=0;d--)t+="确认收货"==s(e.statusCode)[d]?'<em  class="ok" data-order='+e.orderNo+" data-index="+o+">"+s(e.statusCode)[d]+"</em>":"查看物流"==s(e.statusCode)[d]?'<em class="check" data-order='+e.orderNo+'><a href="custom-detail.html?orderNo='+e.orderNo+"&statusCode="+e.statusCode+'#express">'+s(e.statusCode)[d]+"</a></em>":'<em class="server" data-order='+e.orderNo+">"+s(e.statusCode)[d]+"</em>";t+="</div>\n\t\t            </li>"}}),(0,d.default)(o).append(t),function(){var t=(0,d.default)(".goods-item img");(0,r.imgLazy)(t)}(),(0,d.default)(".more .goods-intr-wrap").forEach(function(t,e){(0,d.default)(t).css("width",(0,d.default)(t).find(".goods-imgs").width()*(0,d.default)(t).find(".goods-imgs").length)}),function(){function t(t,e,s){d.default.ajax({type:"post",url:n.default+"/shoporder/confirm",data:{orderNo:t,memberNo:e},success:function(t){return t.head.code?void console.log(t.head.message):((0,d.default)(l).eq(s).text("已完成"),(0,d.default)(a).eq(s).find(".ok").css("display","none"),void o())},error:function(t){console.log(t)}})}function e(t,e,o){i.attr("data-order",t),i.attr("data-index",e),i.attr("data-type",o),r.css("display","block"),setTimeout(function(){r.css("opacity",1)},50)}function o(){r.css("opacity",0),setTimeout(function(){r.css("display","none"),location.reload()},500)}var a=(0,d.default)(".list>li"),s=(0,d.default)(".ok"),r=(0,d.default)(".opacity"),i=(0,d.default)(".opacity .con li:last-of-type"),c=(0,d.default)(".opacity .con li:first-of-type"),l=(0,d.default)(".list .status>em");s.forEach(function(t,o){(0,d.default)(t).on("click",function(){e((0,d.default)(t).get(0).dataset.order,(0,d.default)(t).get(0).dataset.index,(0,d.default)(t).get(0).className)})}),i.on("click",function(){var e=sessionStorage.getItem("vipNo");"ok"==(0,d.default)(this).get(0).dataset.type&&t((0,d.default)(this).get(0).dataset.order,e,(0,d.default)(this).get(0).dataset.index)}),c.on("click",function(){o()})}(),function(){var t=(0,d.default)(".goods-price>em");t.forEach(function(t,e){"联系客服"==(0,d.default)(t).text()&&(0,d.default)(t).on("click",function(){location.href="jump.html"})})}()}function o(t,o){var a=(0,d.default)(o),s=(0,d.default)(".refresh"),i=window.screen.availHeight,m=0,g=0,p=null,h=null,v=null,k=0,N=0,y=(0,r.getSto)("token");a.on("touchstart",function(t){k=t.changedTouches[0].pageY}),a.on("touchmove",function(t){N=t.changedTouches[0].pageY}),a.on("scroll",function(){var o=(0,d.default)(".goods-list li:nth-last-of-type(1)"),a=0;o&&(a=o.offset().top,k-N>=0&&a<i+100&&(clearTimeout(p),p=setTimeout(function(){u++,clearTimeout(v),(0,d.default)(s).html("正在加载中..."),(0,d.default)(s).css("bottom",0),d.default.ajax({type:"post",headers:(0,r.signName)(c.default,l,y),url:n.default+"/shoporders",data:{pageNum:u,pageSize:f,memberNo:l,type:2},success:function(o){o.head.code&&(71982==o.head.code&&((0,r.rmSto)("nickname"),(0,r.rmSto)("timestamp"),(0,r.rmSto)("token"),(0,r.rmSto)("vipNo"),alert("出现错误，请重新登录！"),location.href="user-center.html"),console.log(o.head.message));var o=o.body;o.end?(g||e(t,o.orderList,(0,d.default)(".goods-list")),g++,m=u-1,u=m,(0,d.default)(s).html("已经到末尾咯~"),(0,d.default)(s).css("bottom",0),clearTimeout(h),h=setTimeout(function(){(0,d.default)(s).css("bottom","-1rem")},2e3)):(e(t,o.orderList,(0,d.default)(".goods-list")),v=setTimeout(function(){(0,d.default)(s).css("bottom","-1rem")},2e3),g=0),function(){var t=(0,d.default)(".goods-gife-list img");(0,r.imgLazy)(t)}()}})},1e3)))})}function a(t){var e="";switch(t){case 10:e="等待付款";break;case 20:e="正在备货";break;case 21:e="已取消";break;case 30:e="待收货";break;case 31:e="待退款";break;case 40:e="交易成功";break;case 41:e="已退款";break;case 50:e="售后中";break;case 60:e="售后处理中";break;case 61:e="售后不成立";break;case 70:e="售后成功"}return e}function s(t){var e=[];switch(t){case 10:e=["去支付"];break;case 20:e=[];break;case 21:e=["联系客服","再次购买"];break;case 30:e=["查看物流","确认收货"];break;case 31:e=[];break;case 40:e=["再次购买"];break;case 41:e=[];break;case 50:e=["联系客服"];break;case 60:e=["联系客服"];break;case 61:e=[];break;case 70:e=[]}return e}var i=(0,d.default)(".goods-list"),u=1,f=10,m="",g=(0,r.getSto)("token");(0,r.showImgLayer)("数据请求中..."),d.default.ajax({type:"post",headers:(0,r.signName)(c.default,l,g),url:n.default+"/shoporders",data:{memberNo:l,type:2,pageNo:1,pageSize:10},success:function(e){console.log(e),e.head.code&&(71982==e.head.code&&((0,r.rmSto)("nickname"),(0,r.rmSto)("timestamp"),(0,r.rmSto)("token"),(0,r.rmSto)("vipNo"),alert("出现错误，请重新登录！"),location.href="user-center.html"),console.log(e.head.message));var e=e.body;return(0,r.cancelImgLayer)(),e.orderList.length?void t(m,e.orderList,i):void(0,d.default)(".no-order").css("display","block")},error:function(){}}),o(m,(0,d.default)(".all-order-public"))}(),function(){(0,d.default)(".normal>span").on("click",function(){location.href="jump.html"})}()},91:2});